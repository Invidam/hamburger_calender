{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { API } from \"../../../tools/axiosSetting\";\n\nconst getEmptyWorkList = () => {\n  return [{\n    workTime: -1\n  }];\n};\n\nconst isEmptyWorkList = workList => {\n  var _workList$;\n\n  return workList ? ((_workList$ = workList[0]) === null || _workList$ === void 0 ? void 0 : _workList$.workTime) === -1 : true;\n};\n\nconst checkWorkList = workList => isEmptyWorkList(workList) ? getEmptyWorkList() : workList;\n\nexport const useUpdateWork = (user, date) => {\n  _s();\n\n  // if (getToday() !== date) window.localStorage.removeItem(\"workList\");\n  const initList = !user && window.localStorage.getItem(\"workList\") ? JSON.parse(window.localStorage.getItem(\"workList\")) : [];\n  const [workList, setWorkList] = useState(initList);\n  useEffect(() => {\n    console.log(\"work update start\");\n    getAndUpdateWorkList();\n  }, [date, user]);\n\n  const getAndUpdateWorkList = async () => {\n    let resWorkList;\n\n    if (user) {\n      const data = await API.get(`/api/${user}/${date}/worklist/worklist`);\n      resWorkList = checkWorkList(data === null || data === void 0 ? void 0 : data.data);\n    } else {\n      resWorkList = JSON.parse(localStorage.getItem(\"workList\"));\n    }\n\n    setWorkList(resWorkList);\n  };\n\n  const updateWorkList = _workList => {\n    _workList = checkWorkList(_workList); // const config = getCustomConfig();\n\n    setWorkList(_workList);\n\n    if (user) {\n      API.post(`/api/${user}/${date}/worklist/worklist`, {\n        user: \"TEST\",\n        value: _workList\n      });\n    } else window.localStorage.setItem(\"workList\", JSON.stringify(_workList)); // else window.localStorage.removeItem(\"workList\");\n\n  };\n\n  return [workList, updateWorkList];\n}; //:id꼴이 괜히있는게 아니다 ㅋㅋ;\n//여기서 useState가 동작을 안한다,. RET1 -> RET 로 ㄴ넘어가지가 않는다. 하\n\n_s(useUpdateWork, \"uUnjV6oTVBBPadCGz4VigBOSZFc=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/workList/work/useUpdateWork.js"],"names":["useEffect","useState","API","getEmptyWorkList","workTime","isEmptyWorkList","workList","checkWorkList","useUpdateWork","user","date","initList","window","localStorage","getItem","JSON","parse","setWorkList","console","log","getAndUpdateWorkList","resWorkList","data","get","updateWorkList","_workList","post","value","setItem","stringify"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,GAAT,QAAoB,6BAApB;;AAEA,MAAMC,gBAAgB,GAAG,MAAM;AAC7B,SAAO,CAAC;AAAEC,IAAAA,QAAQ,EAAE,CAAC;AAAb,GAAD,CAAP;AACD,CAFD;;AAGA,MAAMC,eAAe,GAAIC,QAAD;AAAA;;AAAA,SACtBA,QAAQ,GAAG,eAAAA,QAAQ,CAAC,CAAD,CAAR,0DAAaF,QAAb,MAA0B,CAAC,CAA9B,GAAkC,IADpB;AAAA,CAAxB;;AAGA,MAAMG,aAAa,GAAID,QAAD,IACpBD,eAAe,CAACC,QAAD,CAAf,GAA4BH,gBAAgB,EAA5C,GAAiDG,QADnD;;AAGA,OAAO,MAAME,aAAa,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AAAA;;AAC3C;AACA,QAAMC,QAAQ,GACZ,CAACF,IAAD,IAASG,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAT,GACIC,IAAI,CAACC,KAAL,CAAWJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAX,CADJ,GAEI,EAHN;AAIA,QAAM,CAACR,QAAD,EAAWW,WAAX,IAA0BhB,QAAQ,CAACU,QAAD,CAAxC;AACAX,EAAAA,SAAS,CAAC,MAAM;AACdkB,IAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACAC,IAAAA,oBAAoB;AACrB,GAHQ,EAGN,CAACV,IAAD,EAAOD,IAAP,CAHM,CAAT;;AAKA,QAAMW,oBAAoB,GAAG,YAAY;AACvC,QAAIC,WAAJ;;AACA,QAAIZ,IAAJ,EAAU;AACR,YAAMa,IAAI,GAAG,MAAMpB,GAAG,CAACqB,GAAJ,CAAS,QAAOd,IAAK,IAAGC,IAAK,oBAA7B,CAAnB;AACAW,MAAAA,WAAW,GAAGd,aAAa,CAACe,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEA,IAAP,CAA3B;AACD,KAHD,MAGO;AACLD,MAAAA,WAAW,GAAGN,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAd;AACD;;AACDG,IAAAA,WAAW,CAACI,WAAD,CAAX;AACD,GATD;;AAWA,QAAMG,cAAc,GAAIC,SAAD,IAAe;AACpCA,IAAAA,SAAS,GAAGlB,aAAa,CAACkB,SAAD,CAAzB,CADoC,CAEpC;;AACAR,IAAAA,WAAW,CAACQ,SAAD,CAAX;;AACA,QAAIhB,IAAJ,EAAU;AACRP,MAAAA,GAAG,CAACwB,IAAJ,CAAU,QAAOjB,IAAK,IAAGC,IAAK,oBAA9B,EAAmD;AACjDD,QAAAA,IAAI,EAAE,MAD2C;AAEjDkB,QAAAA,KAAK,EAAEF;AAF0C,OAAnD;AAID,KALD,MAKOb,MAAM,CAACC,YAAP,CAAoBe,OAApB,CAA4B,UAA5B,EAAwCb,IAAI,CAACc,SAAL,CAAeJ,SAAf,CAAxC,EAT6B,CAUpC;;AACD,GAXD;;AAYA,SAAO,CAACnB,QAAD,EAAWkB,cAAX,CAAP;AACD,CApCM,C,CAqCP;AACA;;GAtCahB,a","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { API } from \"../../../tools/axiosSetting\";\n\nconst getEmptyWorkList = () => {\n  return [{ workTime: -1 }];\n};\nconst isEmptyWorkList = (workList) =>\n  workList ? workList[0]?.workTime === -1 : true;\n\nconst checkWorkList = (workList) =>\n  isEmptyWorkList(workList) ? getEmptyWorkList() : workList;\n\nexport const useUpdateWork = (user, date) => {\n  // if (getToday() !== date) window.localStorage.removeItem(\"workList\");\n  const initList =\n    !user && window.localStorage.getItem(\"workList\")\n      ? JSON.parse(window.localStorage.getItem(\"workList\"))\n      : [];\n  const [workList, setWorkList] = useState(initList);\n  useEffect(() => {\n    console.log(\"work update start\");\n    getAndUpdateWorkList();\n  }, [date, user]);\n\n  const getAndUpdateWorkList = async () => {\n    let resWorkList;\n    if (user) {\n      const data = await API.get(`/api/${user}/${date}/worklist/worklist`);\n      resWorkList = checkWorkList(data?.data);\n    } else {\n      resWorkList = JSON.parse(localStorage.getItem(\"workList\"));\n    }\n    setWorkList(resWorkList);\n  };\n\n  const updateWorkList = (_workList) => {\n    _workList = checkWorkList(_workList);\n    // const config = getCustomConfig();\n    setWorkList(_workList);\n    if (user) {\n      API.post(`/api/${user}/${date}/worklist/worklist`, {\n        user: \"TEST\",\n        value: _workList,\n      });\n    } else window.localStorage.setItem(\"workList\", JSON.stringify(_workList));\n    // else window.localStorage.removeItem(\"workList\");\n  };\n  return [workList, updateWorkList];\n};\n//:id꼴이 괜히있는게 아니다 ㅋㅋ;\n//여기서 useState가 동작을 안한다,. RET1 -> RET 로 ㄴ넘어가지가 않는다. 하\n"]},"metadata":{},"sourceType":"module"}