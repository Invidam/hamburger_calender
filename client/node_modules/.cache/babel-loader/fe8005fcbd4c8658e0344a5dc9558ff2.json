{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { API } from \"../../tools/API\";\nexport const useUpdateSetting = user => {\n  _s();\n\n  console.log(\"UPDATE SETTING HOOK USER: \");\n  const [targetWorkTime, setTargetWorkTime] = useState(user ? 0 : -1);\n  const [targetWakeHour, setTargetWakeHour] = useState(user ? 0 : -1);\n  const [targetBedHour, setTargetBedHour] = useState(user ? 0 : -1);\n  const [targetWakeMinute, setTargetWakeMinute] = useState(user ? 0 : -1);\n  const [targetBedMinute, setTargetBedMinute] = useState(user ? 0 : -1);\n  const [isSettingHookLading, setLoad] = useState(true);\n\n  const onChangeTargetWorkTime = workTime => setTargetWorkTime(parseInt(workTime));\n\n  const onChangeTargetWakeHour = wakeHour => setTargetWakeHour(parseInt(wakeHour));\n\n  const onChangeTargetBedHour = bedHour => setTargetBedHour(parseInt(bedHour));\n\n  const onChangeTargetWakeMinute = wakeMinute => setTargetWakeMinute(parseInt(wakeMinute));\n\n  const onChangeTargetBedMinute = bedMinute => setTargetBedMinute(parseInt(bedMinute));\n\n  const getAndUpdateSetting = async () => {\n    try {\n      console.log(\"SETTING\");\n      const data = await API.get(`/auth/setting/${user}`);\n      const settingObj = data === null || data === void 0 ? void 0 : data.data;\n      console.log(\"SETTING END\", settingObj);\n      if (isSettingHookLading) setLoad(false);\n      if (!data) throw new Error(\"Cannot find data\");\n      setTargetWorkTime(settingObj === null || settingObj === void 0 ? void 0 : settingObj.targetWorkTime);\n      setTargetWakeHour(settingObj === null || settingObj === void 0 ? void 0 : settingObj.targetWakeTime.hour);\n      setTargetBedHour(settingObj === null || settingObj === void 0 ? void 0 : settingObj.targetBedTime.hour);\n      setTargetWakeMinute(settingObj === null || settingObj === void 0 ? void 0 : settingObj.targetWakeTime.minute);\n      setTargetBedMinute(settingObj === null || settingObj === void 0 ? void 0 : settingObj.targetBedTime.minute);\n    } catch (error) {\n      alert(error); // history.push(\"/setting\");\n    }\n  };\n\n  useEffect(() => {\n    if (user && user !== \"Loading\") getAndUpdateSetting();\n  }, [user]);\n\n  const validator = targetTimeObj => {\n    return targetTimeObj.targetWorkTime && targetTimeObj.targetWakeTime.hour && targetTimeObj.targetBedTime.hour && targetTimeObj.targetWakeTime.minute && targetTimeObj.targetBedTime.minute;\n  };\n\n  const onEditTargetTime = event => {\n    event.preventDefault();\n    let willUpdate = true;\n    const targetTimeObj = {\n      targetWorkTime,\n      targetWakeTime: {\n        hour: targetWakeHour,\n        minute: targetWakeMinute\n      },\n      targetBedTime: {\n        hour: targetBedHour,\n        minute: targetBedMinute\n      }\n    };\n    if (typeof validator === \"function\") willUpdate = validator(targetTimeObj);\n\n    if (willUpdate) {\n      API.post(`/auth/setting/${user}`, {\n        value: targetTimeObj,\n        user\n      });\n    } else {\n      const targetWakeTime = targetWakeHour && targetWakeMinute;\n      const targetBedTime = targetBedHour && targetBedMinute;\n      let errText = `[ERROR] ${targetWorkTime ? \"\" : \"TargetWorkTime\"}${!targetWakeTime + !targetBedTime > 0 && !targetWorkTime ? \", \" : \"\"}${targetWakeTime ? \"\" : \"TargetWakeTime\"}${!targetBedTime > 0 && !targetWakeTime ? \", \" : \"\"}${targetBedTime ? \"\" : \"TargetBedtime\"} ${!targetWorkTime + !targetWakeTime + !targetBedTime > 1 ? \"are\" : \"is\"} not entered.`;\n      alert(errText);\n    }\n  };\n\n  const targetTimeObj = {\n    targetWorkTime,\n    targetWakeTime: {\n      hour: targetWakeHour,\n      minute: targetWakeMinute\n    },\n    targetBedTime: {\n      hour: targetBedHour,\n      minute: targetBedMinute\n    }\n  };\n  return {\n    onEditTargetTime,\n    targetWorkTime,\n    onChangeTargetWorkTime,\n    targetTimeObj,\n    targetWakeHour,\n    targetBedHour,\n    targetWakeMinute,\n    targetBedMinute,\n    onChangeTargetWakeHour,\n    onChangeTargetBedHour,\n    onChangeTargetWakeMinute,\n    onChangeTargetBedMinute,\n    isSettingHookLading\n  };\n};\n\n_s(useUpdateSetting, \"370bWn/kEG+XF8R7v9N/cviuP9A=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/user/useUpdateSetting.js"],"names":["useEffect","useState","API","useUpdateSetting","user","console","log","targetWorkTime","setTargetWorkTime","targetWakeHour","setTargetWakeHour","targetBedHour","setTargetBedHour","targetWakeMinute","setTargetWakeMinute","targetBedMinute","setTargetBedMinute","isSettingHookLading","setLoad","onChangeTargetWorkTime","workTime","parseInt","onChangeTargetWakeHour","wakeHour","onChangeTargetBedHour","bedHour","onChangeTargetWakeMinute","wakeMinute","onChangeTargetBedMinute","bedMinute","getAndUpdateSetting","data","get","settingObj","Error","targetWakeTime","hour","targetBedTime","minute","error","alert","validator","targetTimeObj","onEditTargetTime","event","preventDefault","willUpdate","post","value","errText"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { API } from \"../../tools/API\";\n\nexport const useUpdateSetting = (user) => {\n  console.log(\"UPDATE SETTING HOOK USER: \");\n  const [targetWorkTime, setTargetWorkTime] = useState(user ? 0 : -1);\n  const [targetWakeHour, setTargetWakeHour] = useState(user ? 0 : -1);\n  const [targetBedHour, setTargetBedHour] = useState(user ? 0 : -1);\n  const [targetWakeMinute, setTargetWakeMinute] = useState(user ? 0 : -1);\n  const [targetBedMinute, setTargetBedMinute] = useState(user ? 0 : -1);\n  const [isSettingHookLading, setLoad] = useState(true);\n  const onChangeTargetWorkTime = (workTime) =>\n    setTargetWorkTime(parseInt(workTime));\n  const onChangeTargetWakeHour = (wakeHour) =>\n    setTargetWakeHour(parseInt(wakeHour));\n  const onChangeTargetBedHour = (bedHour) =>\n    setTargetBedHour(parseInt(bedHour));\n  const onChangeTargetWakeMinute = (wakeMinute) =>\n    setTargetWakeMinute(parseInt(wakeMinute));\n  const onChangeTargetBedMinute = (bedMinute) =>\n    setTargetBedMinute(parseInt(bedMinute));\n\n  const getAndUpdateSetting = async () => {\n    try {\n      console.log(\"SETTING\");\n      const data = await API.get(`/auth/setting/${user}`);\n      const settingObj = data?.data;\n      console.log(\"SETTING END\", settingObj);\n      if (isSettingHookLading) setLoad(false);\n      if (!data) throw new Error(\"Cannot find data\");\n      setTargetWorkTime(settingObj?.targetWorkTime);\n      setTargetWakeHour(settingObj?.targetWakeTime.hour);\n      setTargetBedHour(settingObj?.targetBedTime.hour);\n      setTargetWakeMinute(settingObj?.targetWakeTime.minute);\n      setTargetBedMinute(settingObj?.targetBedTime.minute);\n    } catch (error) {\n      alert(error);\n      // history.push(\"/setting\");\n    }\n  };\n  useEffect(() => {\n    if (user && user !== \"Loading\") getAndUpdateSetting();\n  }, [user]);\n\n  const validator = (targetTimeObj) => {\n    return (\n      targetTimeObj.targetWorkTime &&\n      targetTimeObj.targetWakeTime.hour &&\n      targetTimeObj.targetBedTime.hour &&\n      targetTimeObj.targetWakeTime.minute &&\n      targetTimeObj.targetBedTime.minute\n    );\n  };\n  const onEditTargetTime = (event) => {\n    event.preventDefault();\n    let willUpdate = true;\n    const targetTimeObj = {\n      targetWorkTime,\n      targetWakeTime: { hour: targetWakeHour, minute: targetWakeMinute },\n      targetBedTime: { hour: targetBedHour, minute: targetBedMinute },\n    };\n    if (typeof validator === \"function\") willUpdate = validator(targetTimeObj);\n    if (willUpdate) {\n      API.post(`/auth/setting/${user}`, {\n        value: targetTimeObj,\n        user,\n      });\n    } else {\n      const targetWakeTime = targetWakeHour && targetWakeMinute;\n      const targetBedTime = targetBedHour && targetBedMinute;\n      let errText = `[ERROR] ${targetWorkTime ? \"\" : \"TargetWorkTime\"}${\n        !targetWakeTime + !targetBedTime > 0 && !targetWorkTime ? \", \" : \"\"\n      }${targetWakeTime ? \"\" : \"TargetWakeTime\"}${\n        !targetBedTime > 0 && !targetWakeTime ? \", \" : \"\"\n      }${targetBedTime ? \"\" : \"TargetBedtime\"} ${\n        !targetWorkTime + !targetWakeTime + !targetBedTime > 1 ? \"are\" : \"is\"\n      } not entered.`;\n      alert(errText);\n    }\n  };\n  const targetTimeObj = {\n    targetWorkTime,\n    targetWakeTime: { hour: targetWakeHour, minute: targetWakeMinute },\n    targetBedTime: { hour: targetBedHour, minute: targetBedMinute },\n  };\n  return {\n    onEditTargetTime,\n    targetWorkTime,\n    onChangeTargetWorkTime,\n    targetTimeObj,\n    targetWakeHour,\n    targetBedHour,\n    targetWakeMinute,\n    targetBedMinute,\n    onChangeTargetWakeHour,\n    onChangeTargetBedHour,\n    onChangeTargetWakeMinute,\n    onChangeTargetBedMinute,\n    isSettingHookLading,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}