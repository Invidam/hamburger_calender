{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { API } from \"../../../tools/API\";\nimport { LocalStroage } from \"../../../tools/LocalStorage\";\nexport const isEmptyWorkList = workList => workList ? !Object.keys(workList).length : true;\nexport const isEmptyWork = workObj => workObj ? !Object.keys(workObj).length : true;\n\nconst getEmptyWorkList = () => {\n  return {};\n};\n\nconst checkWorkList = workList => isEmptyWorkList(workList) ? getEmptyWorkList() : workList; // const getInitList = (user) =>\n//   !user && window.localStorage.getItem(\"workList\")\n//     ? JSON.parse(window.localStorage.getItem(\"workList\"))\n//     : [];\n\n\nexport const useWorkList = (user, date) => {\n  _s();\n\n  // const initList = getInitList();\n  const [isWorkListLoading, setLoad] = useState(false);\n  const [workList, setWorkList] = useState();\n  const [workTimeSum, setWorkTimeSum] = useState(0);\n\n  const getWorkList = async () => {\n    try {\n      let resWorkList;\n\n      if (user) {\n        console.log(\"BEF: \", workList);\n        setLoad(true);\n        const data = await API.workList(user, date).get();\n        setLoad(false);\n        resWorkList = checkWorkList(data === null || data === void 0 ? void 0 : data.data);\n        console.log(\"USEWORKLIST, data catch\");\n        console.log(\"USEWORKLIST DATA  CATCH  AFT\");\n        setWorkList(resWorkList);\n      } else {\n        resWorkList = LocalStroage.workList().get();\n        console.log(\"USEWORKLIST DATA NO CATCH [][] AFT\");\n        setWorkList(resWorkList);\n      }\n    } catch (error) {\n      setLoad(false);\n      alert(error);\n    }\n  };\n\n  useEffect(() => {\n    console.log(\"GET WORKLIST START\", date, user);\n    getWorkList();\n    return () => setLoad(false);\n  }, [date, user]);\n\n  const setWork = workObj => {\n    console.log(\"SET WRORK START\");\n    const id = workObj.id;\n    const _workList = { ...workList\n    };\n    return {\n      create: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await API.work(user, date).create(workObj);else LocalStroage.workList().set(_workList);\n      },\n      edit: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await API.work(user, date).edit(workObj);else LocalStroage.workList().set(_workList);\n      },\n      delete: async () => {\n        if (!delete _workList[id]) throw new Error(\"Cannot Delete WorkItem\");\n        setWorkList(_workList);\n        console.log(\"IN USE WK, OBJ: \", workObj);\n        if (user) await API.work(user, date).delete(workObj);else LocalStroage.workList().set(_workList);\n      }\n    };\n  };\n\n  useEffect(() => {\n    let sum = 0;\n    workList && Object.values(workList).map((workItem, idx) => {\n      sum += workItem.workTime;\n    });\n    setWorkTimeSum(sum);\n  }, [workList]);\n  return [workList, setWork, isWorkListLoading, workTimeSum];\n};\n\n_s(useWorkList, \"rygr8T1Tffuj3Iqk5AJJq3lbIgs=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/client/src/hooks/workList/work/useWorkList.js"],"names":["useEffect","useState","API","LocalStroage","isEmptyWorkList","workList","Object","keys","length","isEmptyWork","workObj","getEmptyWorkList","checkWorkList","useWorkList","user","date","isWorkListLoading","setLoad","setWorkList","workTimeSum","setWorkTimeSum","getWorkList","resWorkList","console","log","data","get","error","alert","setWork","id","_workList","create","work","set","edit","delete","Error","sum","values","map","workItem","idx","workTime"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,GAAT,QAAoB,oBAApB;AACA,SAASC,YAAT,QAA6B,6BAA7B;AAEA,OAAO,MAAMC,eAAe,GAAIC,QAAD,IAC7BA,QAAQ,GAAG,CAACC,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBG,MAA1B,GAAmC,IADtC;AAEP,OAAO,MAAMC,WAAW,GAAIC,OAAD,IACzBA,OAAO,GAAG,CAACJ,MAAM,CAACC,IAAP,CAAYG,OAAZ,EAAqBF,MAAzB,GAAkC,IADpC;;AAEP,MAAMG,gBAAgB,GAAG,MAAM;AAC7B,SAAO,EAAP;AACD,CAFD;;AAGA,MAAMC,aAAa,GAAIP,QAAD,IACpBD,eAAe,CAACC,QAAD,CAAf,GAA4BM,gBAAgB,EAA5C,GAAiDN,QADnD,C,CAGA;AACA;AACA;AACA;;;AAEA,OAAO,MAAMQ,WAAW,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AAAA;;AACzC;AACA,QAAM,CAACC,iBAAD,EAAoBC,OAApB,IAA+BhB,QAAQ,CAAC,KAAD,CAA7C;AACA,QAAM,CAACI,QAAD,EAAWa,WAAX,IAA0BjB,QAAQ,EAAxC;AACA,QAAM,CAACkB,WAAD,EAAcC,cAAd,IAAgCnB,QAAQ,CAAC,CAAD,CAA9C;;AACA,QAAMoB,WAAW,GAAG,YAAY;AAC9B,QAAI;AACF,UAAIC,WAAJ;;AACA,UAAIR,IAAJ,EAAU;AACRS,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBnB,QAArB;AACAY,QAAAA,OAAO,CAAC,IAAD,CAAP;AACA,cAAMQ,IAAI,GAAG,MAAMvB,GAAG,CAACG,QAAJ,CAAaS,IAAb,EAAmBC,IAAnB,EAAyBW,GAAzB,EAAnB;AACAT,QAAAA,OAAO,CAAC,KAAD,CAAP;AACAK,QAAAA,WAAW,GAAGV,aAAa,CAACa,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEA,IAAP,CAA3B;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACAN,QAAAA,WAAW,CAACI,WAAD,CAAX;AACD,OATD,MASO;AACLA,QAAAA,WAAW,GAAGnB,YAAY,CAACE,QAAb,GAAwBqB,GAAxB,EAAd;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ;AACAN,QAAAA,WAAW,CAACI,WAAD,CAAX;AACD;AACF,KAhBD,CAgBE,OAAOK,KAAP,EAAc;AACdV,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAW,MAAAA,KAAK,CAACD,KAAD,CAAL;AACD;AACF,GArBD;;AAsBA3B,EAAAA,SAAS,CAAC,MAAM;AACduB,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCT,IAAlC,EAAwCD,IAAxC;AACAO,IAAAA,WAAW;AACX,WAAO,MAAMJ,OAAO,CAAC,KAAD,CAApB;AACD,GAJQ,EAIN,CAACF,IAAD,EAAOD,IAAP,CAJM,CAAT;;AAMA,QAAMe,OAAO,GAAInB,OAAD,IAAa;AAC3Ba,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACA,UAAMM,EAAE,GAAGpB,OAAO,CAACoB,EAAnB;AACA,UAAMC,SAAS,GAAG,EAAE,GAAG1B;AAAL,KAAlB;AACA,WAAO;AACL2B,MAAAA,MAAM,EAAE,YAAY;AAClBD,QAAAA,SAAS,CAACD,EAAD,CAAT,GAAgBpB,OAAhB;AACAQ,QAAAA,WAAW,CAACa,SAAD,CAAX;AACA,YAAIjB,IAAJ,EAAU,MAAMZ,GAAG,CAAC+B,IAAJ,CAASnB,IAAT,EAAeC,IAAf,EAAqBiB,MAArB,CAA4BtB,OAA5B,CAAN,CAAV,KACKP,YAAY,CAACE,QAAb,GAAwB6B,GAAxB,CAA4BH,SAA5B;AACN,OANI;AAOLI,MAAAA,IAAI,EAAE,YAAY;AAChBJ,QAAAA,SAAS,CAACD,EAAD,CAAT,GAAgBpB,OAAhB;AACAQ,QAAAA,WAAW,CAACa,SAAD,CAAX;AACA,YAAIjB,IAAJ,EAAU,MAAMZ,GAAG,CAAC+B,IAAJ,CAASnB,IAAT,EAAeC,IAAf,EAAqBoB,IAArB,CAA0BzB,OAA1B,CAAN,CAAV,KACKP,YAAY,CAACE,QAAb,GAAwB6B,GAAxB,CAA4BH,SAA5B;AACN,OAZI;AAaLK,MAAAA,MAAM,EAAE,YAAY;AAClB,YAAI,CAAC,OAAOL,SAAS,CAACD,EAAD,CAArB,EAA2B,MAAM,IAAIO,KAAJ,CAAU,wBAAV,CAAN;AAC3BnB,QAAAA,WAAW,CAACa,SAAD,CAAX;AACAR,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCd,OAAhC;AACA,YAAII,IAAJ,EAAU,MAAMZ,GAAG,CAAC+B,IAAJ,CAASnB,IAAT,EAAeC,IAAf,EAAqBqB,MAArB,CAA4B1B,OAA5B,CAAN,CAAV,KACKP,YAAY,CAACE,QAAb,GAAwB6B,GAAxB,CAA4BH,SAA5B;AACN;AAnBI,KAAP;AAqBD,GAzBD;;AA0BA/B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIsC,GAAG,GAAG,CAAV;AACAjC,IAAAA,QAAQ,IACNC,MAAM,CAACiC,MAAP,CAAclC,QAAd,EAAwBmC,GAAxB,CAA4B,CAACC,QAAD,EAAWC,GAAX,KAAmB;AAC7CJ,MAAAA,GAAG,IAAIG,QAAQ,CAACE,QAAhB;AACD,KAFD,CADF;AAIAvB,IAAAA,cAAc,CAACkB,GAAD,CAAd;AACD,GAPQ,EAON,CAACjC,QAAD,CAPM,CAAT;AAQA,SAAO,CAACA,QAAD,EAAWwB,OAAX,EAAoBb,iBAApB,EAAuCG,WAAvC,CAAP;AACD,CApEM;;GAAMN,W","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { API } from \"../../../tools/API\";\nimport { LocalStroage } from \"../../../tools/LocalStorage\";\n\nexport const isEmptyWorkList = (workList) =>\n  workList ? !Object.keys(workList).length : true;\nexport const isEmptyWork = (workObj) =>\n  workObj ? !Object.keys(workObj).length : true;\nconst getEmptyWorkList = () => {\n  return {};\n};\nconst checkWorkList = (workList) =>\n  isEmptyWorkList(workList) ? getEmptyWorkList() : workList;\n\n// const getInitList = (user) =>\n//   !user && window.localStorage.getItem(\"workList\")\n//     ? JSON.parse(window.localStorage.getItem(\"workList\"))\n//     : [];\n\nexport const useWorkList = (user, date) => {\n  // const initList = getInitList();\n  const [isWorkListLoading, setLoad] = useState(false);\n  const [workList, setWorkList] = useState();\n  const [workTimeSum, setWorkTimeSum] = useState(0);\n  const getWorkList = async () => {\n    try {\n      let resWorkList;\n      if (user) {\n        console.log(\"BEF: \", workList);\n        setLoad(true);\n        const data = await API.workList(user, date).get();\n        setLoad(false);\n        resWorkList = checkWorkList(data?.data);\n        console.log(\"USEWORKLIST, data catch\");\n        console.log(\"USEWORKLIST DATA  CATCH  AFT\");\n        setWorkList(resWorkList);\n      } else {\n        resWorkList = LocalStroage.workList().get();\n        console.log(\"USEWORKLIST DATA NO CATCH [][] AFT\");\n        setWorkList(resWorkList);\n      }\n    } catch (error) {\n      setLoad(false);\n      alert(error);\n    }\n  };\n  useEffect(() => {\n    console.log(\"GET WORKLIST START\", date, user);\n    getWorkList();\n    return () => setLoad(false);\n  }, [date, user]);\n\n  const setWork = (workObj) => {\n    console.log(\"SET WRORK START\");\n    const id = workObj.id;\n    const _workList = { ...workList };\n    return {\n      create: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await API.work(user, date).create(workObj);\n        else LocalStroage.workList().set(_workList);\n      },\n      edit: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await API.work(user, date).edit(workObj);\n        else LocalStroage.workList().set(_workList);\n      },\n      delete: async () => {\n        if (!delete _workList[id]) throw new Error(\"Cannot Delete WorkItem\");\n        setWorkList(_workList);\n        console.log(\"IN USE WK, OBJ: \", workObj);\n        if (user) await API.work(user, date).delete(workObj);\n        else LocalStroage.workList().set(_workList);\n      },\n    };\n  };\n  useEffect(() => {\n    let sum = 0;\n    workList &&\n      Object.values(workList).map((workItem, idx) => {\n        sum += workItem.workTime;\n      });\n    setWorkTimeSum(sum);\n  }, [workList]);\n  return [workList, setWork, isWorkListLoading, workTimeSum];\n};\n"]},"metadata":{},"sourceType":"module"}