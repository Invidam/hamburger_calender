{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { getToday } from \"../../../tools/time\";\nlet cnt = 0;\n\nconst getEmptyTimeObj = () => {\n  return {\n    hour: -1,\n    minute: -1\n  };\n};\n\nexport const isEmptyTimeObj = timeObj => !timeObj || timeObj.hour === -1 || timeObj.minute === -1;\n\nconst checkTimeObj = timeObj => isEmptyTimeObj(timeObj) ? getEmptyTimeObj() : timeObj;\n\nexport const useUpdateTime = (key, user, date) => {\n  _s();\n\n  const initVal = !user && window.localStorage.getItem(key) ? JSON.parse(window.localStorage.getItem(key)) : null;\n  const [recordTime, setRecordTime] = useState(); // setRecordTime(initVal);\n\n  useEffect(() => {\n    console.log(\"DATE CHANGE\");\n    console.log(\"RECORDTIME BEF COND\", date, key, recordTime, !recordTime);\n    getAndUpdateRecordTime();\n  }, [date]);\n\n  const getAndUpdateRecordTime = async () => {\n    console.log(\"AXIOS START\");\n    const data = await axios.get(`/api/${user}/${date}/worklist/record-time/${key}`);\n    const resTimeObj = checkTimeObj(data === null || data === void 0 ? void 0 : data.data); // window.localStorage.setItem(key, JSON.stringify(data?.data));\n\n    console.log(\"SET AFT: \", resTimeObj);\n    setRecordTime(resTimeObj);\n  };\n\n  const updateRecordTime = timeObj => {\n    timeObj = checkTimeObj(timeObj);\n    axios.post(`/api/${user}/${date}/worklist/record-time/${key}`, {\n      value: timeObj\n    }); // window.localStorage.setItem(key, JSON.stringify(timeObj));\n\n    setRecordTime(timeObj);\n  };\n\n  const onClick = event => {\n    event.preventDefault();\n    const [hour, minute] = new Date().toTimeString().split(\":\").slice(0, 2).map(numChar => parseInt(numChar));\n    const timeObj = {\n      hour,\n      minute\n    };\n    updateRecordTime(timeObj);\n  };\n\n  return [recordTime, onClick, updateRecordTime];\n};\n\n_s(useUpdateTime, \"sN7BXTS0FFJUSwRzwyWLh97t3u0=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/workList/time/useUpdateTime.js"],"names":["axios","useState","useEffect","getToday","cnt","getEmptyTimeObj","hour","minute","isEmptyTimeObj","timeObj","checkTimeObj","useUpdateTime","key","user","date","initVal","window","localStorage","getItem","JSON","parse","recordTime","setRecordTime","console","log","getAndUpdateRecordTime","data","get","resTimeObj","updateRecordTime","post","value","onClick","event","preventDefault","Date","toTimeString","split","slice","map","numChar","parseInt"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { getToday } from \"../../../tools/time\";\nlet cnt = 0;\nconst getEmptyTimeObj = () => {\n  return { hour: -1, minute: -1 };\n};\n\nexport const isEmptyTimeObj = (timeObj) =>\n  !timeObj || timeObj.hour === -1 || timeObj.minute === -1;\n\nconst checkTimeObj = (timeObj) =>\n  isEmptyTimeObj(timeObj) ? getEmptyTimeObj() : timeObj;\n\nexport const useUpdateTime = (key, user, date) => {\n  const initVal =\n    !user && window.localStorage.getItem(key)\n      ? JSON.parse(window.localStorage.getItem(key))\n      : null;\n  const [recordTime, setRecordTime] = useState();\n  // setRecordTime(initVal);\n  useEffect(() => {\n    console.log(\"DATE CHANGE\");\n\n    console.log(\"RECORDTIME BEF COND\", date, key, recordTime, !recordTime);\n    getAndUpdateRecordTime();\n  }, [date]);\n\n  const getAndUpdateRecordTime = async () => {\n    console.log(\"AXIOS START\");\n    const data = await axios.get(\n      `/api/${user}/${date}/worklist/record-time/${key}`\n    );\n    const resTimeObj = checkTimeObj(data?.data);\n    // window.localStorage.setItem(key, JSON.stringify(data?.data));\n    console.log(\"SET AFT: \", resTimeObj);\n    setRecordTime(resTimeObj);\n  };\n\n  const updateRecordTime = (timeObj) => {\n    timeObj = checkTimeObj(timeObj);\n\n    axios.post(`/api/${user}/${date}/worklist/record-time/${key}`, {\n      value: timeObj,\n    });\n    // window.localStorage.setItem(key, JSON.stringify(timeObj));\n    setRecordTime(timeObj);\n  };\n  const onClick = (event) => {\n    event.preventDefault();\n    const [hour, minute] = new Date()\n      .toTimeString()\n      .split(\":\")\n      .slice(0, 2)\n      .map((numChar) => parseInt(numChar));\n    const timeObj = { hour, minute };\n    updateRecordTime(timeObj);\n  };\n  return [recordTime, onClick, updateRecordTime];\n};\n"]},"metadata":{},"sourceType":"module"}