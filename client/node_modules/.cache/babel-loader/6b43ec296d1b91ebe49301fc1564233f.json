{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport isEmail from \"validator/lib/isEmail\";\nimport { API } from \"../../tools/API\";\nconst baseUrl = \"https://github.com/login/oauth/authorize\";\nconst authConfig = {\n  client_id: \"44089da06c95a868c4cb\",\n  allow_signup: false,\n  scope: \"read:user user:email\"\n};\nconsole.log(\"COMPARE: \", process.env.GH_CLIENT_ID, \"44089da06c95a868c4cb\");\nexport const useAttemptLogin = async (login, history) => {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoginPageLoading, setLoad] = useState(true);\n\n  const handleSubmitNotSocial = async event => {\n    try {\n      event.preventDefault();\n      const userInfo = {\n        email,\n        password\n      };\n      if (!isEmail(email)) throw new Error(\"Entered Email form is wrong\");\n      if (!password) throw new Error(\"Password is empty\");\n      await login(userInfo, \"notSocial\");\n      history.push(\"/\");\n    } catch (error) {\n      alert(error);\n      setEmail(\"\");\n      setPassword(\"\");\n      history.push(\"/login\");\n    }\n  };\n\n  const getGithubAuthUrl = async () => {\n    var _response$data;\n\n    // if (!isLoginPageLoading) setLoad(true);\n    const response = await API.auth().getGithubAuthUrl();\n    console.log(\"AUTH RES: \", response === null || response === void 0 ? void 0 : response.data);\n    setLoad(false);\n    return response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.authUrl;\n  };\n\n  const authUrl = await getGithubAuthUrl();\n  return {\n    email,\n    setEmail,\n    password,\n    setPassword,\n    handleSubmitNotSocial,\n    authUrl,\n    isLoginPageLoading\n  };\n};\n\n_s(useAttemptLogin, \"uHPfWHaP18BmSXBTBO6YyNPiCi8=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/client/src/hooks/user/useAttemptLogin.js"],"names":["useState","isEmail","API","baseUrl","authConfig","client_id","allow_signup","scope","console","log","process","env","GH_CLIENT_ID","useAttemptLogin","login","history","email","setEmail","password","setPassword","isLoginPageLoading","setLoad","handleSubmitNotSocial","event","preventDefault","userInfo","Error","push","error","alert","getGithubAuthUrl","response","auth","data","authUrl"],"mappings":";;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,GAAT,QAAoB,iBAApB;AACA,MAAMC,OAAO,GAAG,0CAAhB;AACA,MAAMC,UAAU,GAAG;AACjBC,EAAAA,SAAS,EAAE,sBADM;AAEjBC,EAAAA,YAAY,EAAE,KAFG;AAGjBC,EAAAA,KAAK,EAAE;AAHU,CAAnB;AAKAC,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBC,OAAO,CAACC,GAAR,CAAYC,YAArC,EAAmD,sBAAnD;AAEA,OAAO,MAAMC,eAAe,GAAG,OAAOC,KAAP,EAAcC,OAAd,KAA0B;AAAA;;AACvD,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBjB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACkB,QAAD,EAAWC,WAAX,IAA0BnB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACoB,kBAAD,EAAqBC,OAArB,IAAgCrB,QAAQ,CAAC,IAAD,CAA9C;;AAEA,QAAMsB,qBAAqB,GAAG,MAAOC,KAAP,IAAiB;AAC7C,QAAI;AACFA,MAAAA,KAAK,CAACC,cAAN;AACA,YAAMC,QAAQ,GAAG;AAAET,QAAAA,KAAF;AAASE,QAAAA;AAAT,OAAjB;AACA,UAAI,CAACjB,OAAO,CAACe,KAAD,CAAZ,EAAqB,MAAM,IAAIU,KAAJ,CAAU,6BAAV,CAAN;AACrB,UAAI,CAACR,QAAL,EAAe,MAAM,IAAIQ,KAAJ,CAAU,mBAAV,CAAN;AACf,YAAMZ,KAAK,CAACW,QAAD,EAAW,WAAX,CAAX;AACAV,MAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACD,KAPD,CAOE,OAAOC,KAAP,EAAc;AACdC,MAAAA,KAAK,CAACD,KAAD,CAAL;AACAX,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACAE,MAAAA,WAAW,CAAC,EAAD,CAAX;AACAJ,MAAAA,OAAO,CAACY,IAAR,CAAa,QAAb;AACD;AACF,GAdD;;AAeA,QAAMG,gBAAgB,GAAG,YAAY;AAAA;;AACnC;AACA,UAAMC,QAAQ,GAAG,MAAM7B,GAAG,CAAC8B,IAAJ,GAAWF,gBAAX,EAAvB;AACAtB,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BsB,QAA1B,aAA0BA,QAA1B,uBAA0BA,QAAQ,CAAEE,IAApC;AACAZ,IAAAA,OAAO,CAAC,KAAD,CAAP;AACA,WAAOU,QAAP,aAAOA,QAAP,yCAAOA,QAAQ,CAAEE,IAAjB,mDAAO,eAAgBC,OAAvB;AACD,GAND;;AAOA,QAAMA,OAAO,GAAG,MAAMJ,gBAAgB,EAAtC;AACA,SAAO;AACLd,IAAAA,KADK;AAELC,IAAAA,QAFK;AAGLC,IAAAA,QAHK;AAILC,IAAAA,WAJK;AAKLG,IAAAA,qBALK;AAMLY,IAAAA,OANK;AAOLd,IAAAA;AAPK,GAAP;AASD,CArCM;;GAAMP,e","sourcesContent":["import { useState } from \"react\";\nimport isEmail from \"validator/lib/isEmail\";\nimport { API } from \"../../tools/API\";\nconst baseUrl = \"https://github.com/login/oauth/authorize\";\nconst authConfig = {\n  client_id: \"44089da06c95a868c4cb\",\n  allow_signup: false,\n  scope: \"read:user user:email\",\n};\nconsole.log(\"COMPARE: \", process.env.GH_CLIENT_ID, \"44089da06c95a868c4cb\");\n\nexport const useAttemptLogin = async (login, history) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoginPageLoading, setLoad] = useState(true);\n\n  const handleSubmitNotSocial = async (event) => {\n    try {\n      event.preventDefault();\n      const userInfo = { email, password };\n      if (!isEmail(email)) throw new Error(\"Entered Email form is wrong\");\n      if (!password) throw new Error(\"Password is empty\");\n      await login(userInfo, \"notSocial\");\n      history.push(\"/\");\n    } catch (error) {\n      alert(error);\n      setEmail(\"\");\n      setPassword(\"\");\n      history.push(\"/login\");\n    }\n  };\n  const getGithubAuthUrl = async () => {\n    // if (!isLoginPageLoading) setLoad(true);\n    const response = await API.auth().getGithubAuthUrl();\n    console.log(\"AUTH RES: \", response?.data);\n    setLoad(false);\n    return response?.data?.authUrl;\n  };\n  const authUrl = await getGithubAuthUrl();\n  return {\n    email,\n    setEmail,\n    password,\n    setPassword,\n    handleSubmitNotSocial,\n    authUrl,\n    isLoginPageLoading,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}