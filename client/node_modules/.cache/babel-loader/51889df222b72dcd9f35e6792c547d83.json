{"ast":null,"code":"import _toConsumableArray from\"/home/invidam/hamburger_calender/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/invidam/hamburger_calender/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/invidam/hamburger_calender/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/invidam/hamburger_calender/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{Deque}from\"../../classes/Deque\";import{Node}from\"../../classes/Node\";import{API}from\"../../tools/API\";import{LocalStroage}from\"../../tools/LocalStorage\";import{getAddedDateStr,getDiffDayInStr,subtractDayInStr}from\"../../tools/time\";export var DISPLAY_LENGTH=5;export var ARRAY_LENGTH=11;var makeStartDate=function makeStartDate(date){return getAddedDateStr(date,-1*Math.floor(ARRAY_LENGTH/2));};// const makeStartDate = (date) => getAddedDateStr(date, -1 * STARTDATEDIFF);\nvar getStartDate=function getStartDate(date){return LocalStroage.startDate().isEmpty()?makeStartDate(date):LocalStroage.startDate().get();};var befStartDate;var listDeque;var turnDeque=function turnDeque(deque,cnt,isLeft){if(isLeft){// <-- 방향으로 이동\nwhile(cnt--){deque.pop_front();deque.push_back(new Node());}}else{while(cnt--){deque.pop_back();deque.push_front(new Node());}}};var setDeque=function setDeque(deque,arr,cnt,isLeft){if(isLeft){// <-- 맨앞 요소를 없애고 맨앞에 arr요소들을 넣는다.\nvar idx=0;deque.pop_back(cnt);while(idx<cnt){deque.push_back(new Node(arr[idx++]));}}else{var _idx=0;deque.pop_front(cnt);while(cnt--){deque.push_front(new Node(arr[cnt]));}}};var getEndDate=function getEndDate(startDate){return getAddedDateStr(startDate,ARRAY_LENGTH-1);};var getDeqNeedDate=function getDeqNeedDate(startDate,dateDiff){var endDate=getEndDate(startDate);var isLeft=dateDiff>0;if(isLeft){startDate=getAddedDateStr(endDate,-1*dateDiff+1);}else{// 왼쪽 버튼 클릭 배열이 오른쪽 이동 왼쪽 요소들이 필요\nendDate=getAddedDateStr(startDate,-1*dateDiff-1);// startDate = getAddedDateStr(startDate, dateDiff + 1);\n}return[startDate,endDate];};// getAddedDateStr(startDate, ARRAY_LENGTH - 1);\nexport var useListView=function useListView(user,date,setDate){var _useState=useState(getStartDate(date)),_useState2=_slicedToArray(_useState,2),startDate=_useState2[0],setStratDate=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),listView=_useState4[0],setListView=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isListViewLoading=_useState6[0],setLoad=_useState6[1];var updateStartDate=function updateStartDate(nextDate){LocalStroage.startDate().set(nextDate);setStratDate(nextDate);};var onClickLeftBtn=function onClickLeftBtn(){if(isListViewLoading)return;var nextDate=getAddedDateStr(startDate,-1);updateStartDate(nextDate);};var onClickRightBtn=function onClickRightBtn(){if(isListViewLoading)return;var nextDate=getAddedDateStr(startDate,1);updateStartDate(nextDate);};var getListView=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(startDate,endDate){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return API.listView(user,startDate,endDate,ARRAY_LENGTH).get();case 3:data=_context.sent;if(data===null||data===void 0?void 0:data.data){_context.next=6;break;}throw new Error(\"List View cann't found\");case 6:return _context.abrupt(\"return\",data.data);case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);alert(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function getListView(_x,_x2){return _ref.apply(this,arguments);};}();var updateListView=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,_listView;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!isListViewLoading)setLoad(true);console.log(\"MK LV\");if(!(user&&startDate)){_context2.next=10;break;}_context2.next=5;return getListView(startDate,getEndDate(startDate));case 5:response=_context2.sent;listDeque=new Deque(response,DISPLAY_LENGTH);listDeque.print(\"MK LV?\");_listView=_toConsumableArray(listDeque.get());setListView(_listView);case 10:setLoad(false);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function updateListView(){return _ref2.apply(this,arguments);};}();var moveListView=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(startDate,dateDiff){var isLeft,_getDeqNeedDate,_getDeqNeedDate2,needStartDate,needEndDate,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!isListViewLoading)setLoad(true);if(!(user&&startDate)){_context3.next=10;break;}isLeft=dateDiff>0;turnDeque(listDeque,Math.abs(dateDiff),isLeft);_getDeqNeedDate=getDeqNeedDate(startDate,dateDiff),_getDeqNeedDate2=_slicedToArray(_getDeqNeedDate,2),needStartDate=_getDeqNeedDate2[0],needEndDate=_getDeqNeedDate2[1];setListView(listDeque.get());_context3.next=8;return getListView(needStartDate,needEndDate);case 8:response=_context3.sent;setDeque(listDeque,response,Math.abs(dateDiff),isLeft);case 10:setLoad(false);case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function moveListView(_x3,_x4){return _ref3.apply(this,arguments);};}();var MakeListView=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var dateDiff;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0://setListView를 좀 더 스마트하게 바꾸어야 한다.\ndateDiff=subtractDayInStr(befStartDate,startDate);console.log(\"[listview]Set list view start\",\"LISTQUE\",listDeque,\"BEF START DATE: \",befStartDate,\"STARDIFF: \",startDate,\"DDATE DIFF: \",dateDiff);if(!(!listDeque||!befStartDate||dateDiff>2||dateDiff<-2||dateDiff===0)){_context4.next=7;break;}_context4.next=5;return updateListView();case 5:_context4.next=9;break;case 7:_context4.next=9;return moveListView(startDate,dateDiff);case 9:// updateListView(startDate);\nbefStartDate=startDate;// return () => setLoad(false);\ncase 10:case\"end\":return _context4.stop();}}},_callee4);}));return function MakeListView(){return _ref4.apply(this,arguments);};}();useEffect(function(){updateStartDate(makeStartDate(date));},[date]);useEffect(function(){console.log(\"LV LOAD : \",isListViewLoading);},[isListViewLoading]);useEffect(function(){console.log(\"LIST VIEW USE EFFECT REACH\");MakeListView();return function(){return setLoad(false);};},[user,startDate]);return{isListViewLoading:isListViewLoading,startDate:startDate,listView:listView,onClickLeftBtn:onClickLeftBtn,onClickRightBtn:onClickRightBtn,updateListView:updateListView};};// startTime 변경이 아닌ㄷ ㅏ른 방식으로 호출하여 에러 해결이 가능할 듯 하나 실제로 필요한진 몰겟드.","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/listView/useListView.js"],"names":["useEffect","useState","Deque","Node","API","LocalStroage","getAddedDateStr","getDiffDayInStr","subtractDayInStr","DISPLAY_LENGTH","ARRAY_LENGTH","makeStartDate","date","Math","floor","getStartDate","startDate","isEmpty","get","befStartDate","listDeque","turnDeque","deque","cnt","isLeft","pop_front","push_back","pop_back","push_front","setDeque","arr","idx","getEndDate","getDeqNeedDate","dateDiff","endDate","useListView","user","setDate","setStratDate","listView","setListView","isListViewLoading","setLoad","updateStartDate","nextDate","set","onClickLeftBtn","onClickRightBtn","getListView","data","Error","alert","updateListView","console","log","response","print","_listView","moveListView","abs","needStartDate","needEndDate","MakeListView"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Deque } from \"../../classes/Deque\";\nimport { Node } from \"../../classes/Node\";\nimport { API } from \"../../tools/API\";\nimport { LocalStroage } from \"../../tools/LocalStorage\";\nimport {\n  getAddedDateStr,\n  getDiffDayInStr,\n  subtractDayInStr,\n} from \"../../tools/time\";\nexport const DISPLAY_LENGTH = 5;\nexport const ARRAY_LENGTH = 11;\nconst makeStartDate = (date) =>\n  getAddedDateStr(date, -1 * Math.floor(ARRAY_LENGTH / 2));\n// const makeStartDate = (date) => getAddedDateStr(date, -1 * STARTDATEDIFF);\nconst getStartDate = (date) =>\n  LocalStroage.startDate().isEmpty()\n    ? makeStartDate(date)\n    : LocalStroage.startDate().get();\n\nlet befStartDate;\nlet listDeque;\n\nconst turnDeque = (deque, cnt, isLeft) => {\n  if (isLeft) {\n    // <-- 방향으로 이동\n    while (cnt--) {\n      deque.pop_front();\n      deque.push_back(new Node());\n    }\n  } else {\n    while (cnt--) {\n      deque.pop_back();\n\n      deque.push_front(new Node());\n    }\n  }\n};\nconst setDeque = (deque, arr, cnt, isLeft) => {\n  if (isLeft) {\n    // <-- 맨앞 요소를 없애고 맨앞에 arr요소들을 넣는다.\n    let idx = 0;\n    deque.pop_back(cnt);\n    while (idx < cnt) {\n      deque.push_back(new Node(arr[idx++]));\n    }\n  } else {\n    let idx = 0;\n    deque.pop_front(cnt);\n    while (cnt--) {\n      deque.push_front(new Node(arr[cnt]));\n    }\n  }\n};\n\nconst getEndDate = (startDate) => getAddedDateStr(startDate, ARRAY_LENGTH - 1);\nconst getDeqNeedDate = (startDate, dateDiff) => {\n  let endDate = getEndDate(startDate);\n  const isLeft = dateDiff > 0;\n  if (isLeft) {\n    startDate = getAddedDateStr(endDate, -1 * dateDiff + 1);\n  } else {\n    // 왼쪽 버튼 클릭 배열이 오른쪽 이동 왼쪽 요소들이 필요\n    endDate = getAddedDateStr(startDate, -1 * dateDiff - 1);\n    // startDate = getAddedDateStr(startDate, dateDiff + 1);\n  }\n  return [startDate, endDate];\n};\n// getAddedDateStr(startDate, ARRAY_LENGTH - 1);\nexport const useListView = (user, date, setDate) => {\n  const [startDate, setStratDate] = useState(getStartDate(date));\n  const [listView, setListView] = useState();\n  const [isListViewLoading, setLoad] = useState(true);\n\n  const updateStartDate = (nextDate) => {\n    LocalStroage.startDate().set(nextDate);\n    setStratDate(nextDate);\n  };\n  const onClickLeftBtn = () => {\n    if (isListViewLoading) return;\n    const nextDate = getAddedDateStr(startDate, -1);\n    updateStartDate(nextDate);\n  };\n  const onClickRightBtn = () => {\n    if (isListViewLoading) return;\n    const nextDate = getAddedDateStr(startDate, 1);\n    updateStartDate(nextDate);\n  };\n\n  const getListView = async (startDate, endDate) => {\n    try {\n      const data = await API.listView(\n        user,\n        startDate,\n        endDate,\n        ARRAY_LENGTH\n      ).get();\n      if (!data?.data) throw new Error(\"List View cann't found\");\n\n      return data.data;\n    } catch (error) {\n      alert(error);\n    }\n  };\n  const updateListView = async () => {\n    if (!isListViewLoading) setLoad(true);\n    console.log(\"MK LV\");\n    if (user && startDate) {\n      const response = await getListView(startDate, getEndDate(startDate));\n      listDeque = new Deque(response, DISPLAY_LENGTH);\n      listDeque.print(\"MK LV?\");\n      const _listView = [...listDeque.get()];\n      setListView(_listView);\n    }\n    setLoad(false);\n  };\n  const moveListView = async (startDate, dateDiff) => {\n    if (!isListViewLoading) setLoad(true);\n    if (user && startDate) {\n      const isLeft = dateDiff > 0;\n      turnDeque(listDeque, Math.abs(dateDiff), isLeft);\n      const [needStartDate, needEndDate] = getDeqNeedDate(startDate, dateDiff);\n      setListView(listDeque.get());\n\n      const response = await getListView(needStartDate, needEndDate);\n      setDeque(listDeque, response, Math.abs(dateDiff), isLeft);\n    }\n    setLoad(false);\n  };\n  const MakeListView = async () => {\n    //setListView를 좀 더 스마트하게 바꾸어야 한다.\n\n    const dateDiff = subtractDayInStr(befStartDate, startDate);\n    console.log(\n      \"[listview]Set list view start\",\n      \"LISTQUE\",\n      listDeque,\n      \"BEF START DATE: \",\n      befStartDate,\n      \"STARDIFF: \",\n      startDate,\n      \"DDATE DIFF: \",\n      dateDiff\n    );\n    if (\n      !listDeque ||\n      !befStartDate ||\n      dateDiff > 2 ||\n      dateDiff < -2 ||\n      dateDiff === 0\n    )\n      await updateListView();\n    else await moveListView(startDate, dateDiff);\n    // updateListView(startDate);\n    befStartDate = startDate;\n    // return () => setLoad(false);\n  };\n  useEffect(() => {\n    updateStartDate(makeStartDate(date));\n  }, [date]);\n  useEffect(() => {\n    console.log(\"LV LOAD : \", isListViewLoading);\n  }, [isListViewLoading]);\n  useEffect(() => {\n    console.log(\"LIST VIEW USE EFFECT REACH\");\n    MakeListView();\n    return () => setLoad(false);\n  }, [user, startDate]);\n  return {\n    isListViewLoading,\n    startDate,\n    listView,\n    onClickLeftBtn,\n    onClickRightBtn,\n    updateListView,\n  };\n};\n\n// startTime 변경이 아닌ㄷ ㅏ른 방식으로 호출하여 에러 해결이 가능할 듯 하나 실제로 필요한진 몰겟드.\n"]},"metadata":{},"sourceType":"module"}