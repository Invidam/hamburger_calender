{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport qs from \"qs\";\nimport { useEffect } from \"react\";\nimport { axiosSetting } from \"../date/useSetAxios\";\nexport const useAttemptGithubLogin = props => {\n  _s();\n\n  const {\n    history,\n    location,\n    customLoginHook\n  } = props;\n  const setUser = customLoginHook[1];\n  const login = customLoginHook[3];\n  useEffect(() => {\n    const getToken = async () => {\n      const {\n        code\n      } = qs.parse(location === null || location === void 0 ? void 0 : location.search, {\n        ignoreQueryPrefix: true\n      });\n\n      try {\n        const response = await axios.post(\"/auth/login/github\", {\n          code\n        });\n        const {\n          access_token,\n          username\n        } = response.data;\n        localStorage.setItem(\"access_token\", access_token);\n        setUser(username);\n        history.push(\"/\");\n      } catch (error) {\n        console.log(\"GITERR\", error);\n        alert(error);\n        history.push(\"/login\");\n      }\n    };\n\n    axiosSetting();\n    getToken();\n  }, [location, history]);\n};\n\n_s(useAttemptGithubLogin, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/user/useAttemptGithubLogin.js"],"names":["axios","qs","useEffect","axiosSetting","useAttemptGithubLogin","props","history","location","customLoginHook","setUser","login","getToken","code","parse","search","ignoreQueryPrefix","response","post","access_token","username","data","localStorage","setItem","push","error","console","log","alert"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,OAAO,MAAMC,qBAAqB,GAAIC,KAAD,IAAW;AAAA;;AAC9C,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,QAAX;AAAqBC,IAAAA;AAArB,MAAyCH,KAA/C;AACA,QAAMI,OAAO,GAAGD,eAAe,CAAC,CAAD,CAA/B;AACA,QAAME,KAAK,GAAGF,eAAe,CAAC,CAAD,CAA7B;AACAN,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,QAAQ,GAAG,YAAY;AAC3B,YAAM;AAAEC,QAAAA;AAAF,UAAWX,EAAE,CAACY,KAAH,CAASN,QAAT,aAASA,QAAT,uBAASA,QAAQ,CAAEO,MAAnB,EAA2B;AAC1CC,QAAAA,iBAAiB,EAAE;AADuB,OAA3B,CAAjB;;AAGA,UAAI;AACF,cAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,IAAN,CAAW,oBAAX,EAAiC;AACtDL,UAAAA;AADsD,SAAjC,CAAvB;AAGA,cAAM;AAAEM,UAAAA,YAAF;AAAgBC,UAAAA;AAAhB,YAA6BH,QAAQ,CAACI,IAA5C;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCJ,YAArC;AACAT,QAAAA,OAAO,CAACU,QAAD,CAAP;AACAb,QAAAA,OAAO,CAACiB,IAAR,CAAa,GAAb;AACD,OARD,CAQE,OAAOC,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACAG,QAAAA,KAAK,CAACH,KAAD,CAAL;AACAlB,QAAAA,OAAO,CAACiB,IAAR,CAAa,QAAb;AACD;AACF,KAjBD;;AAkBApB,IAAAA,YAAY;AACZQ,IAAAA,QAAQ;AACT,GArBQ,EAqBN,CAACJ,QAAD,EAAWD,OAAX,CArBM,CAAT;AAsBD,CA1BM;;GAAMF,qB","sourcesContent":["import axios from \"axios\";\nimport qs from \"qs\";\nimport { useEffect } from \"react\";\nimport { axiosSetting } from \"../date/useSetAxios\";\nexport const useAttemptGithubLogin = (props) => {\n  const { history, location, customLoginHook } = props;\n  const setUser = customLoginHook[1];\n  const login = customLoginHook[3];\n  useEffect(() => {\n    const getToken = async () => {\n      const { code } = qs.parse(location?.search, {\n        ignoreQueryPrefix: true,\n      });\n      try {\n        const response = await axios.post(\"/auth/login/github\", {\n          code,\n        });\n        const { access_token, username } = response.data;\n        localStorage.setItem(\"access_token\", access_token);\n        setUser(username);\n        history.push(\"/\");\n      } catch (error) {\n        console.log(\"GITERR\", error);\n        alert(error);\n        history.push(\"/login\");\n      }\n    };\n    axiosSetting();\n    getToken();\n  }, [location, history]);\n};\n"]},"metadata":{},"sourceType":"module"}