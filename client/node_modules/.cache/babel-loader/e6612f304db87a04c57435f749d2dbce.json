{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { APIv2 } from \"../../tools/API\";\nimport { LocalStroage } from \"../../tools/LocalStorage\";\nexport const useTodoList = (user, date) => {\n  _s();\n\n  const [todoList, setTodoList] = useState();\n  const [isTodoListLoading, setLoad] = useState(false);\n  const [sortType, setSortType] = useState(\"time\"); // \"time\" or \"priority\"\n\n  const getTodoList = async sortType => {\n    try {\n      if (user) {\n        setLoad(true);\n        const data = await APIv2.todoList(user, date).get(sortType);\n        setLoad(false);\n        const resTodoList = data === null || data === void 0 ? void 0 : data.data;\n        if (!data) throw new Error(\"TodoList can't found\");\n        setTodoList(resTodoList);\n      } else {\n        const resTodoList = LocalStroage.todoList.get(sortType);\n        setTodoList(resTodoList);\n      }\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  useEffect(() => {\n    getTodoList();\n  }, [user, date, sortType]);\n\n  const setTodo = todoObj => {\n    const id = todoObj.id;\n    const _todoList = { ...todoList\n    };\n    return {\n      create: async () => {\n        _todoList[id] = todoObj;\n        setTodoList(_todoList);\n        if (user) await APIv2.todo(user, date).create(todoObj);else LocalStroage.todoList().set(_todoList);\n      },\n      edit: async () => {\n        console.log(\"EDIT TODO LIST\", todoObj);\n        _todoList[id] = todoObj;\n        setTodoList(_todoList);\n        if (user) await APIv2.todo(user, date).edit(todoObj);else LocalStroage.todoList().set(_todoList);\n      },\n      delete: async () => {\n        if (!delete _todoList[id]) throw new Error(\"Cannot Delete TodoItem\");\n        setTodoList(_todoList);\n        if (user) await APIv2.todo(user, date).delete(todoObj);else LocalStroage.todoList().set(_todoList);\n      }\n    };\n  };\n\n  return [todoList, setTodo, isTodoListLoading];\n};\n\n_s(useTodoList, \"vIIuK/tgDNfOZPcjrscTuSbyQ8c=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/todolist/useTodoList.js"],"names":["useEffect","useState","APIv2","LocalStroage","useTodoList","user","date","todoList","setTodoList","isTodoListLoading","setLoad","sortType","setSortType","getTodoList","data","get","resTodoList","Error","error","alert","setTodo","todoObj","id","_todoList","create","todo","set","edit","console","log","delete"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { APIv2 } from \"../../tools/API\";\nimport { LocalStroage } from \"../../tools/LocalStorage\";\n\nexport const useTodoList = (user, date) => {\n  const [todoList, setTodoList] = useState();\n  const [isTodoListLoading, setLoad] = useState(false);\n  const [sortType, setSortType] = useState(\"time\"); // \"time\" or \"priority\"\n  const getTodoList = async (sortType) => {\n    try {\n      if (user) {\n        setLoad(true);\n        const data = await APIv2.todoList(user, date).get(sortType);\n        setLoad(false);\n        const resTodoList = data?.data;\n        if (!data) throw new Error(\"TodoList can't found\");\n        setTodoList(resTodoList);\n      } else {\n        const resTodoList = LocalStroage.todoList.get(sortType);\n        setTodoList(resTodoList);\n      }\n    } catch (error) {\n      alert(error);\n    }\n  };\n  useEffect(() => {\n    getTodoList();\n  }, [user, date, sortType]);\n\n  const setTodo = (todoObj) => {\n    const id = todoObj.id;\n    const _todoList = { ...todoList };\n    return {\n      create: async () => {\n        _todoList[id] = todoObj;\n        setTodoList(_todoList);\n        if (user) await APIv2.todo(user, date).create(todoObj);\n        else LocalStroage.todoList().set(_todoList);\n      },\n      edit: async () => {\n        console.log(\"EDIT TODO LIST\", todoObj);\n        _todoList[id] = todoObj;\n        setTodoList(_todoList);\n        if (user) await APIv2.todo(user, date).edit(todoObj);\n        else LocalStroage.todoList().set(_todoList);\n      },\n      delete: async () => {\n        if (!delete _todoList[id]) throw new Error(\"Cannot Delete TodoItem\");\n        setTodoList(_todoList);\n        if (user) await APIv2.todo(user, date).delete(todoObj);\n        else LocalStroage.todoList().set(_todoList);\n      },\n    };\n  };\n  return [todoList, setTodo, isTodoListLoading];\n};\n"]},"metadata":{},"sourceType":"module"}