{"ast":null,"code":"import axios from \"axios\";\nexport const getCustomConfig = () => {\n  const token = localStorage.getItem(\"access_token\");\n  const date = localStorage.getItem(\"date\");\n  const config = {\n    headers: {\n      \"x-access-token\": token,\n      \"x-access-date\": date\n    }\n  };\n  return config;\n};\nexport let API = axios.create(getCustomConfig());\nAPI.interceptors.response.use(res => {\n  return res;\n}, e => {\n  var _e$response;\n\n  console.log(\"ERR\", e === null || e === void 0 ? void 0 : e.response);\n\n  if ((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status) === 401) {\n    var _e$response2;\n\n    console.log(\"ER1ROR: \", e.response); // alert();\n\n    throw new Error(`401 - Unauthorized\\n${(_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : _e$response2.data}`);\n  }\n\n  alert(\"other err\");\n  throw new Error(`toher rerr`); // return Promise.reject(e);\n});\nexport const updateAPIHeader = () => {\n  API = axios.create(getCustomConfig());\n};\nexport class APIv2 {\n  static updateHeader() {\n    API = axios.create(getCustomConfig());\n  }\n\n  static timeRecord(user, date, key) {\n    try {\n      const url = `/api/${user}/${date}/worklist/recordTime/${key}`;\n      return {\n        get: async () => {\n          return await API.get(url);\n        },\n        create: async data => {\n          return await API.put(url, {\n            value: data\n          });\n        },\n        edit: async data => {\n          return await API.post(url, {\n            value: data\n          });\n        },\n        delete: async data => {\n          console.log(\"IN API DATA: \", data);\n          return await API.delete(url, {\n            data: {\n              value: data\n            }\n          });\n        }\n      };\n    } catch (error) {\n      throw new Error(error);\n    }\n  }\n\n  static workList(user, date) {\n    try {\n      const url = `/api/${user}/${date}/worklist/worklist`;\n      return {\n        get: async () => {\n          return await API.get(url);\n        },\n        create: async data => {\n          return await API.put(url, {\n            value: data\n          });\n        },\n        edit: async data => {\n          return await API.post(url, {\n            value: data\n          });\n        },\n        delete: async data => {\n          console.log(\"IN API DATA: \", data);\n          return await API.delete(url, {\n            data: {\n              value: data\n            }\n          });\n        }\n      };\n    } catch (error) {\n      throw new Error(error);\n    }\n  }\n\n} //API.workList(\"SR\",\"1212-12-12\").create({ab:\"c\"});\n//SetWork({123:213}).delete();\n//Work().delte();","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/tools/API.js"],"names":["axios","getCustomConfig","token","localStorage","getItem","date","config","headers","API","create","interceptors","response","use","res","e","console","log","status","Error","data","alert","updateAPIHeader","APIv2","updateHeader","timeRecord","user","key","url","get","put","value","edit","post","delete","error","workList"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\nexport const getCustomConfig = () => {\n  const token = localStorage.getItem(\"access_token\");\n  const date = localStorage.getItem(\"date\");\n  const config = {\n    headers: { \"x-access-token\": token, \"x-access-date\": date },\n  };\n  return config;\n};\n\nexport let API = axios.create(getCustomConfig());\n\nAPI.interceptors.response.use(\n  (res) => {\n    return res;\n  },\n  (e) => {\n    console.log(\"ERR\", e?.response);\n    if (e?.response?.status === 401) {\n      console.log(\"ER1ROR: \", e.response);\n      // alert();\n      throw new Error(`401 - Unauthorized\\n${e.response?.data}`);\n    }\n    alert(\"other err\");\n    throw new Error(`toher rerr`);\n    // return Promise.reject(e);\n  }\n);\n\nexport const updateAPIHeader = () => {\n  API = axios.create(getCustomConfig());\n};\nexport class APIv2 {\n  static updateHeader() {\n    API = axios.create(getCustomConfig());\n  }\n  static timeRecord(user, date, key) {\n    try {\n      const url = `/api/${user}/${date}/worklist/recordTime/${key}`;\n      return {\n        get: async () => {\n          return await API.get(url);\n        },\n        create: async (data) => {\n          return await API.put(url, { value: data });\n        },\n        edit: async (data) => {\n          return await API.post(url, { value: data });\n        },\n        delete: async (data) => {\n          console.log(\"IN API DATA: \", data);\n          return await API.delete(url, { data: { value: data } });\n        },\n      };\n    } catch (error) {\n      throw new Error(error);\n    }\n  }\n  static workList(user, date) {\n    try {\n      const url = `/api/${user}/${date}/worklist/worklist`;\n      return {\n        get: async () => {\n          return await API.get(url);\n        },\n        create: async (data) => {\n          return await API.put(url, { value: data });\n        },\n        edit: async (data) => {\n          return await API.post(url, { value: data });\n        },\n        delete: async (data) => {\n          console.log(\"IN API DATA: \", data);\n          return await API.delete(url, { data: { value: data } });\n        },\n      };\n    } catch (error) {\n      throw new Error(error);\n    }\n  }\n}\n\n//API.workList(\"SR\",\"1212-12-12\").create({ab:\"c\"});\n//SetWork({123:213}).delete();\n//Work().delte();\n"]},"metadata":{},"sourceType":"module"}