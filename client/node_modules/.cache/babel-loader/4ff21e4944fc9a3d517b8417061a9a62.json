{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { getToday } from \"../../../tools/time\";\nexport const useUpdateTime = (key, user, date) => {\n  _s();\n\n  console.log(\"UPDATE TIME HOOK DATE: \", date, getToday()); // if (getToday() !== date) window.localStorage.removeItem(key);\n\n  const initVal = window.localStorage.getItem(key) ? JSON.parse(window.localStorage.getItem(key)) : null;\n  if (key === \"wakeTime\") console.log(\"UPDATE TIME HOOK INIT VAL\", initVal);\n  const [recordTime, setRecordTime] = useState(initVal); // setRecordTime(initVal);\n\n  useEffect(() => {\n    console.log(\"DATE CHANG================\", date);\n    setRecordTime(initVal);\n  }, [date]);\n  if (key === \"wakeTime\") console.log(\"UPDATE TIME HOOK RECRORD TIME\", recordTime);\n\n  if (!recordTime || recordTime.hour === -1) {}\n\n  const updateRecordTime = timeObj => {\n    if (!timeObj) timeObj = {\n      hour: -1,\n      minute: -1\n    };\n    axios.post(`/api/${user}/${date}/worklist/record-time/${key}`, {\n      value: timeObj\n    });\n    window.localStorage.setItem(key, JSON.stringify(timeObj));\n    setRecordTime(timeObj);\n  };\n\n  const onClick = event => {\n    event.preventDefault();\n    const [hour, minute] = new Date().toTimeString().split(\":\").slice(0, 2).map(numChar => parseInt(numChar));\n    const timeObj = {\n      hour,\n      minute\n    };\n    updateRecordTime(timeObj);\n  };\n\n  return [recordTime, onClick, updateRecordTime];\n};\n\n_s(useUpdateTime, \"h490kuPbigxM53kww9L99hhwvTY=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/workList/time/useUpdateTime.js"],"names":["axios","useState","useEffect","getToday","useUpdateTime","key","user","date","console","log","initVal","window","localStorage","getItem","JSON","parse","recordTime","setRecordTime","hour","updateRecordTime","timeObj","minute","post","value","setItem","stringify","onClick","event","preventDefault","Date","toTimeString","split","slice","map","numChar","parseInt"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,GAAD,EAAMC,IAAN,EAAYC,IAAZ,KAAqB;AAAA;;AAChDC,EAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCF,IAAvC,EAA6CJ,QAAQ,EAArD,EADgD,CAEhD;;AACA,QAAMO,OAAO,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BR,GAA5B,IACZS,IAAI,CAACC,KAAL,CAAWJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4BR,GAA5B,CAAX,CADY,GAEZ,IAFJ;AAGA,MAAIA,GAAG,KAAK,UAAZ,EAAwBG,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCC,OAAzC;AACxB,QAAM,CAACM,UAAD,EAAaC,aAAb,IAA8BhB,QAAQ,CAACS,OAAD,CAA5C,CAPgD,CAQhD;;AACAR,EAAAA,SAAS,CAAC,MAAM;AACdM,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CF,IAA1C;AACAU,IAAAA,aAAa,CAACP,OAAD,CAAb;AACD,GAHQ,EAGN,CAACH,IAAD,CAHM,CAAT;AAIA,MAAIF,GAAG,KAAK,UAAZ,EACEG,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CO,UAA7C;;AAEF,MAAI,CAACA,UAAD,IAAeA,UAAU,CAACE,IAAX,KAAoB,CAAC,CAAxC,EAA2C,CAC1C;;AACD,QAAMC,gBAAgB,GAAIC,OAAD,IAAa;AACpC,QAAI,CAACA,OAAL,EAAcA,OAAO,GAAG;AAAEF,MAAAA,IAAI,EAAE,CAAC,CAAT;AAAYG,MAAAA,MAAM,EAAE,CAAC;AAArB,KAAV;AAEdrB,IAAAA,KAAK,CAACsB,IAAN,CAAY,QAAOhB,IAAK,IAAGC,IAAK,yBAAwBF,GAAI,EAA5D,EAA+D;AAC7DkB,MAAAA,KAAK,EAAEH;AADsD,KAA/D;AAGAT,IAAAA,MAAM,CAACC,YAAP,CAAoBY,OAApB,CAA4BnB,GAA5B,EAAiCS,IAAI,CAACW,SAAL,CAAeL,OAAf,CAAjC;AACAH,IAAAA,aAAa,CAACG,OAAD,CAAb;AACD,GARD;;AASA,QAAMM,OAAO,GAAIC,KAAD,IAAW;AACzBA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAM,CAACV,IAAD,EAAOG,MAAP,IAAiB,IAAIQ,IAAJ,GACpBC,YADoB,GAEpBC,KAFoB,CAEd,GAFc,EAGpBC,KAHoB,CAGd,CAHc,EAGX,CAHW,EAIpBC,GAJoB,CAIfC,OAAD,IAAaC,QAAQ,CAACD,OAAD,CAJL,CAAvB;AAKA,UAAMd,OAAO,GAAG;AAAEF,MAAAA,IAAF;AAAQG,MAAAA;AAAR,KAAhB;AACAF,IAAAA,gBAAgB,CAACC,OAAD,CAAhB;AACD,GATD;;AAUA,SAAO,CAACJ,UAAD,EAAaU,OAAb,EAAsBP,gBAAtB,CAAP;AACD,CAtCM;;GAAMf,a","sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect } from \"react\";\nimport { getToday } from \"../../../tools/time\";\n\nexport const useUpdateTime = (key, user, date) => {\n  console.log(\"UPDATE TIME HOOK DATE: \", date, getToday());\n  // if (getToday() !== date) window.localStorage.removeItem(key);\n  const initVal = window.localStorage.getItem(key)\n    ? JSON.parse(window.localStorage.getItem(key))\n    : null;\n  if (key === \"wakeTime\") console.log(\"UPDATE TIME HOOK INIT VAL\", initVal);\n  const [recordTime, setRecordTime] = useState(initVal);\n  // setRecordTime(initVal);\n  useEffect(() => {\n    console.log(\"DATE CHANG================\", date);\n    setRecordTime(initVal);\n  }, [date]);\n  if (key === \"wakeTime\")\n    console.log(\"UPDATE TIME HOOK RECRORD TIME\", recordTime);\n\n  if (!recordTime || recordTime.hour === -1) {\n  }\n  const updateRecordTime = (timeObj) => {\n    if (!timeObj) timeObj = { hour: -1, minute: -1 };\n\n    axios.post(`/api/${user}/${date}/worklist/record-time/${key}`, {\n      value: timeObj,\n    });\n    window.localStorage.setItem(key, JSON.stringify(timeObj));\n    setRecordTime(timeObj);\n  };\n  const onClick = (event) => {\n    event.preventDefault();\n    const [hour, minute] = new Date()\n      .toTimeString()\n      .split(\":\")\n      .slice(0, 2)\n      .map((numChar) => parseInt(numChar));\n    const timeObj = { hour, minute };\n    updateRecordTime(timeObj);\n  };\n  return [recordTime, onClick, updateRecordTime];\n};\n"]},"metadata":{},"sourceType":"module"}