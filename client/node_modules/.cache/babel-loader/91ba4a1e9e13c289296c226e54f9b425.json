{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { API } from \"../../../tools/axiosSetting\";\nimport randomToken from \"rand-token\";\nexport const usePushWork = ({\n  user,\n  date,\n  workList,\n  setWorkList,\n  callback\n}) => {\n  _s();\n\n  const [workColor, setColor] = useState();\n  const [workName, setWorkName] = useState();\n  const [workTime, setWorkTime] = useState();\n  const id = Date.now().toString(16) + randomToken.generate(5);\n\n  const getIdx = () => (workList === null || workList === void 0 ? void 0 : workList.length) && workList[0].workTime !== -1 ? workList.length : 0;\n\n  const hexToRgba = color => {\n    const r = parseInt(color.substr(1, 2), 16);\n    const g = parseInt(color.substr(3, 2), 16);\n    const b = parseInt(color.substr(5, 2), 16);\n    return \"rgba(\" + r + \",\" + g + \",\" + b + \", 1)\";\n  };\n\n  const onChangeWorkColor = color => {\n    if (!color) {} else if (color.substr(0, 1) === \"#\") {\n      color = hexToRgba(color);\n    }\n\n    setColor(color);\n  };\n\n  const onChangeWorkName = name => setWorkName(name);\n\n  const onChangeWorkTime = time => setWorkTime(parseInt(time));\n\n  const validator = workObj => {\n    return workObj.workName && workObj.workTime && workObj.workColor;\n  };\n\n  const pushWork = async workObj => {\n    workList[id] = workObj;\n    setWorkList(workList); // if (!workList || workList[0]?.workTime === -1) setWorkList([workObj]);\n    // else setWorkList([...workList, workObj]);\n\n    const response = await API.put(`/api/${user}/${date}/worklist/worklist`, {\n      value: workObj\n    });\n    console.log(\"PUSH RESPONSE\", response);\n  };\n\n  const getErrText = workObj => {\n    let errText = `[ERROR] ${workName ? \"\" : \"WorkName\"}${!workTime + !workColor > 0 && !workName ? \", \" : \"\"}${workTime ? \"\" : \"WorkTime\"}${!workColor > 0 && !workTime ? \", \" : \"\"}${workColor ? \"\" : \"WorkColor\"} ${!workName + !workTime + !workColor > 1 ? \"are\" : \"is\"} not entered.`;\n    return errText;\n  };\n\n  const onSubmitWork = event => {\n    try {\n      event.preventDefault(); // const workName = event.target.workName.value;\n      // const workTime = parseInt(event.target.workTime.value);\n\n      const workObj = {\n        workName,\n        workTime,\n        workColor,\n        id\n      };\n      let willUpdate = true;\n      if (typeof validator === \"function\") willUpdate = validator(workObj);\n\n      if (willUpdate) {\n        callback();\n        console.log(\"work:ist: \", workList);\n        pushWork(workObj);\n      } else {\n        throw new Error(getErrText(workObj));\n      }\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  return {\n    onChangeWorkColor,\n    onChangeWorkName,\n    onChangeWorkTime,\n    onSubmitWork\n  };\n};\n\n_s(usePushWork, \"s6cUyFsU/WjXfCqWvMkOQ/lz0wk=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/workList/work/usePushWork.js"],"names":["useState","API","randomToken","usePushWork","user","date","workList","setWorkList","callback","workColor","setColor","workName","setWorkName","workTime","setWorkTime","id","Date","now","toString","generate","getIdx","length","hexToRgba","color","r","parseInt","substr","g","b","onChangeWorkColor","onChangeWorkName","name","onChangeWorkTime","time","validator","workObj","pushWork","response","put","value","console","log","getErrText","errText","onSubmitWork","event","preventDefault","willUpdate","Error","error","alert"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { API } from \"../../../tools/axiosSetting\";\nimport randomToken from \"rand-token\";\nexport const usePushWork = ({\n  user,\n  date,\n  workList,\n  setWorkList,\n  callback,\n}) => {\n  const [workColor, setColor] = useState();\n  const [workName, setWorkName] = useState();\n  const [workTime, setWorkTime] = useState();\n  const id = Date.now().toString(16) + randomToken.generate(5);\n  const getIdx = () =>\n    workList?.length && workList[0].workTime !== -1 ? workList.length : 0;\n\n  const hexToRgba = (color) => {\n    const r = parseInt(color.substr(1, 2), 16);\n    const g = parseInt(color.substr(3, 2), 16);\n    const b = parseInt(color.substr(5, 2), 16);\n    return \"rgba(\" + r + \",\" + g + \",\" + b + \", 1)\";\n  };\n\n  const onChangeWorkColor = (color) => {\n    if (!color) {\n    } else if (color.substr(0, 1) === \"#\") {\n      color = hexToRgba(color);\n    }\n    setColor(color);\n  };\n  const onChangeWorkName = (name) => setWorkName(name);\n  const onChangeWorkTime = (time) => setWorkTime(parseInt(time));\n  const validator = (workObj) => {\n    return workObj.workName && workObj.workTime && workObj.workColor;\n  };\n  const pushWork = async (workObj) => {\n    workList[id] = workObj;\n    setWorkList(workList);\n    // if (!workList || workList[0]?.workTime === -1) setWorkList([workObj]);\n    // else setWorkList([...workList, workObj]);\n    const response = await API.put(`/api/${user}/${date}/worklist/worklist`, {\n      value: workObj,\n    });\n    console.log(\"PUSH RESPONSE\", response);\n  };\n  const getErrText = (workObj) => {\n    let errText = `[ERROR] ${workName ? \"\" : \"WorkName\"}${\n      !workTime + !workColor > 0 && !workName ? \", \" : \"\"\n    }${workTime ? \"\" : \"WorkTime\"}${!workColor > 0 && !workTime ? \", \" : \"\"}${\n      workColor ? \"\" : \"WorkColor\"\n    } ${!workName + !workTime + !workColor > 1 ? \"are\" : \"is\"} not entered.`;\n    return errText;\n  };\n  const onSubmitWork = (event) => {\n    try {\n      event.preventDefault();\n      // const workName = event.target.workName.value;\n      // const workTime = parseInt(event.target.workTime.value);\n\n      const workObj = { workName, workTime, workColor, id };\n      let willUpdate = true;\n      if (typeof validator === \"function\") willUpdate = validator(workObj);\n      if (willUpdate) {\n        callback();\n        console.log(\"work:ist: \", workList);\n        pushWork(workObj);\n      } else {\n        throw new Error(getErrText(workObj));\n      }\n    } catch (error) {\n      alert(error);\n    }\n  };\n  return {\n    onChangeWorkColor,\n    onChangeWorkName,\n    onChangeWorkTime,\n    onSubmitWork,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}