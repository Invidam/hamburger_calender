{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport qs from \"qs\";\nimport { useEffect } from \"react\";\nimport { axiosSetting } from \"../date/useSetAxios\";\nexport const useAttemptGithubLogin = props => {\n  _s();\n\n  const {\n    history,\n    location,\n    customLoginHook\n  } = props;\n  const setUser = customLoginHook[1];\n  const login = customLoginHook[3];\n  useEffect(() => {\n    const getToken = async () => {\n      const {\n        code\n      } = qs.parse(location === null || location === void 0 ? void 0 : location.search, {\n        ignoreQueryPrefix: true\n      });\n\n      try {\n        const userInfo = {\n          code\n        };\n        login(userInfo, \"github\");\n        history.push(\"/\");\n      } catch (error) {\n        console.log(\"GITERR\", error);\n        alert(error);\n        history.push(\"/login\");\n      } // try {\n      //   const response = await axios.post(\"/auth/login/github\", {\n      //     code,\n      //   });\n      //   const { access_token, username } = response.data;\n      //   localStorage.setItem(\"access_token\", access_token);\n      //   setUser(username);\n      //   history.push(\"/\");\n      // } catch (error) {\n      //   console.log(\"GITERR\", error);\n      //   alert(error);\n      //   history.push(\"/login\");\n      // }\n\n    };\n\n    axiosSetting();\n    getToken();\n  }, [location, history]);\n};\n\n_s(useAttemptGithubLogin, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/user/useAttemptGithubLogin.js"],"names":["qs","useEffect","axiosSetting","useAttemptGithubLogin","props","history","location","customLoginHook","setUser","login","getToken","code","parse","search","ignoreQueryPrefix","userInfo","push","error","console","log","alert"],"mappings":";;AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,OAAO,MAAMC,qBAAqB,GAAIC,KAAD,IAAW;AAAA;;AAC9C,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,QAAX;AAAqBC,IAAAA;AAArB,MAAyCH,KAA/C;AACA,QAAMI,OAAO,GAAGD,eAAe,CAAC,CAAD,CAA/B;AACA,QAAME,KAAK,GAAGF,eAAe,CAAC,CAAD,CAA7B;AACAN,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMS,QAAQ,GAAG,YAAY;AAC3B,YAAM;AAAEC,QAAAA;AAAF,UAAWX,EAAE,CAACY,KAAH,CAASN,QAAT,aAASA,QAAT,uBAASA,QAAQ,CAAEO,MAAnB,EAA2B;AAC1CC,QAAAA,iBAAiB,EAAE;AADuB,OAA3B,CAAjB;;AAIA,UAAI;AACF,cAAMC,QAAQ,GAAG;AAAEJ,UAAAA;AAAF,SAAjB;AACAF,QAAAA,KAAK,CAACM,QAAD,EAAW,QAAX,CAAL;AACAV,QAAAA,OAAO,CAACW,IAAR,CAAa,GAAb;AACD,OAJD,CAIE,OAAOC,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACAG,QAAAA,KAAK,CAACH,KAAD,CAAL;AACAZ,QAAAA,OAAO,CAACW,IAAR,CAAa,QAAb;AACD,OAb0B,CAc3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,KA3BD;;AA4BAd,IAAAA,YAAY;AACZQ,IAAAA,QAAQ;AACT,GA/BQ,EA+BN,CAACJ,QAAD,EAAWD,OAAX,CA/BM,CAAT;AAgCD,CApCM;;GAAMF,qB","sourcesContent":["import qs from \"qs\";\nimport { useEffect } from \"react\";\nimport { axiosSetting } from \"../date/useSetAxios\";\nexport const useAttemptGithubLogin = (props) => {\n  const { history, location, customLoginHook } = props;\n  const setUser = customLoginHook[1];\n  const login = customLoginHook[3];\n  useEffect(() => {\n    const getToken = async () => {\n      const { code } = qs.parse(location?.search, {\n        ignoreQueryPrefix: true,\n      });\n\n      try {\n        const userInfo = { code };\n        login(userInfo, \"github\");\n        history.push(\"/\");\n      } catch (error) {\n        console.log(\"GITERR\", error);\n        alert(error);\n        history.push(\"/login\");\n      }\n      // try {\n      //   const response = await axios.post(\"/auth/login/github\", {\n      //     code,\n      //   });\n      //   const { access_token, username } = response.data;\n      //   localStorage.setItem(\"access_token\", access_token);\n      //   setUser(username);\n      //   history.push(\"/\");\n      // } catch (error) {\n      //   console.log(\"GITERR\", error);\n      //   alert(error);\n      //   history.push(\"/login\");\n      // }\n    };\n    axiosSetting();\n    getToken();\n  }, [location, history]);\n};\n"]},"metadata":{},"sourceType":"module"}