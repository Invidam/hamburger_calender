{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { API, APIv2 } from \"../../../tools/axiosSetting\";\nexport const useWorkList = (user, date) => {\n  _s();\n\n  const getEmptyWorkList = () => {\n    return {};\n  };\n\n  const isEmptyWorkList = workList => workList ? !Object.keys(workList).length : true;\n\n  const checkWorkList = workList => isEmptyWorkList(workList) ? getEmptyWorkList() : workList;\n\n  const getInitList = user => !user && window.localStorage.getItem(\"workList\") ? JSON.parse(window.localStorage.getItem(\"workList\")) : [];\n\n  const initList = getInitList();\n  const [workList, setWorkList] = useState(initList);\n\n  const getWorkList = async () => {\n    let resWorkList;\n\n    if (user) {\n      // const data = await API.get(`/api/${user}/${date}/worklist/worklist`);\n      const data = await APIv2.workList(user, date).get();\n      console.log(\"WORKLIST, data: \", data, data === null || data === void 0 ? void 0 : data.data);\n      resWorkList = checkWorkList(data === null || data === void 0 ? void 0 : data.data);\n    } else {\n      resWorkList = JSON.parse(localStorage.getItem(\"workList\"));\n    }\n\n    setWorkList(resWorkList);\n  };\n\n  useEffect(() => {\n    getWorkList();\n  }, [date, user]);\n\n  const updateWorkList = _workList => {\n    _workList = checkWorkList(_workList);\n    console.log(\"BEF UPDATE:\", _workList);\n    setWorkList(_workList);\n    console.log(\"AFT UPDATE:\", workList);\n\n    if (user) {// API.post(`/api/${user}/${date}/worklist/worklist`, {\n      //   user: \"TEST\",\n      //   value: _workList,\n      // });\n    } else window.localStorage.setItem(\"workList\", JSON.stringify(_workList));\n  };\n\n  return [workList, updateWorkList];\n};\n\n_s(useWorkList, \"uUnjV6oTVBBPadCGz4VigBOSZFc=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/workList/work/useWorkList.js"],"names":["useEffect","useState","API","APIv2","useWorkList","user","date","getEmptyWorkList","isEmptyWorkList","workList","Object","keys","length","checkWorkList","getInitList","window","localStorage","getItem","JSON","parse","initList","setWorkList","getWorkList","resWorkList","data","get","console","log","updateWorkList","_workList","setItem","stringify"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,GAAT,EAAcC,KAAd,QAA2B,6BAA3B;AAEA,OAAO,MAAMC,WAAW,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AAAA;;AACzC,QAAMC,gBAAgB,GAAG,MAAM;AAC7B,WAAO,EAAP;AACD,GAFD;;AAGA,QAAMC,eAAe,GAAIC,QAAD,IACtBA,QAAQ,GAAG,CAACC,MAAM,CAACC,IAAP,CAAYF,QAAZ,EAAsBG,MAA1B,GAAmC,IAD7C;;AAGA,QAAMC,aAAa,GAAIJ,QAAD,IACpBD,eAAe,CAACC,QAAD,CAAf,GAA4BF,gBAAgB,EAA5C,GAAiDE,QADnD;;AAGA,QAAMK,WAAW,GAAIT,IAAD,IAClB,CAACA,IAAD,IAASU,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAT,GACIC,IAAI,CAACC,KAAL,CAAWJ,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,CAAX,CADJ,GAEI,EAHN;;AAKA,QAAMG,QAAQ,GAAGN,WAAW,EAA5B;AACA,QAAM,CAACL,QAAD,EAAWY,WAAX,IAA0BpB,QAAQ,CAACmB,QAAD,CAAxC;;AAEA,QAAME,WAAW,GAAG,YAAY;AAC9B,QAAIC,WAAJ;;AACA,QAAIlB,IAAJ,EAAU;AACR;AACA,YAAMmB,IAAI,GAAG,MAAMrB,KAAK,CAACM,QAAN,CAAeJ,IAAf,EAAqBC,IAArB,EAA2BmB,GAA3B,EAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,IAAhC,EAAsCA,IAAtC,aAAsCA,IAAtC,uBAAsCA,IAAI,CAAEA,IAA5C;AACAD,MAAAA,WAAW,GAAGV,aAAa,CAACW,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEA,IAAP,CAA3B;AACD,KALD,MAKO;AACLD,MAAAA,WAAW,GAAGL,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAd;AACD;;AACDI,IAAAA,WAAW,CAACE,WAAD,CAAX;AACD,GAXD;;AAYAvB,EAAAA,SAAS,CAAC,MAAM;AACdsB,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAAChB,IAAD,EAAOD,IAAP,CAFM,CAAT;;AAIA,QAAMuB,cAAc,GAAIC,SAAD,IAAe;AACpCA,IAAAA,SAAS,GAAGhB,aAAa,CAACgB,SAAD,CAAzB;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BE,SAA3B;AACAR,IAAAA,WAAW,CAACQ,SAAD,CAAX;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BlB,QAA3B;;AACA,QAAIJ,IAAJ,EAAU,CACR;AACA;AACA;AACA;AACD,KALD,MAKOU,MAAM,CAACC,YAAP,CAAoBc,OAApB,CAA4B,UAA5B,EAAwCZ,IAAI,CAACa,SAAL,CAAeF,SAAf,CAAxC;AACR,GAXD;;AAYA,SAAO,CAACpB,QAAD,EAAWmB,cAAX,CAAP;AACD,CA/CM;;GAAMxB,W","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { API, APIv2 } from \"../../../tools/axiosSetting\";\n\nexport const useWorkList = (user, date) => {\n  const getEmptyWorkList = () => {\n    return {};\n  };\n  const isEmptyWorkList = (workList) =>\n    workList ? !Object.keys(workList).length : true;\n\n  const checkWorkList = (workList) =>\n    isEmptyWorkList(workList) ? getEmptyWorkList() : workList;\n\n  const getInitList = (user) =>\n    !user && window.localStorage.getItem(\"workList\")\n      ? JSON.parse(window.localStorage.getItem(\"workList\"))\n      : [];\n\n  const initList = getInitList();\n  const [workList, setWorkList] = useState(initList);\n\n  const getWorkList = async () => {\n    let resWorkList;\n    if (user) {\n      // const data = await API.get(`/api/${user}/${date}/worklist/worklist`);\n      const data = await APIv2.workList(user, date).get();\n      console.log(\"WORKLIST, data: \", data, data?.data);\n      resWorkList = checkWorkList(data?.data);\n    } else {\n      resWorkList = JSON.parse(localStorage.getItem(\"workList\"));\n    }\n    setWorkList(resWorkList);\n  };\n  useEffect(() => {\n    getWorkList();\n  }, [date, user]);\n\n  const updateWorkList = (_workList) => {\n    _workList = checkWorkList(_workList);\n    console.log(\"BEF UPDATE:\", _workList);\n    setWorkList(_workList);\n    console.log(\"AFT UPDATE:\", workList);\n    if (user) {\n      // API.post(`/api/${user}/${date}/worklist/worklist`, {\n      //   user: \"TEST\",\n      //   value: _workList,\n      // });\n    } else window.localStorage.setItem(\"workList\", JSON.stringify(_workList));\n  };\n  return [workList, updateWorkList];\n};\n"]},"metadata":{},"sourceType":"module"}