{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { API, APIv2 } from \"../../../tools/API\";\nimport { LocalStroage } from \"../../../tools/LocalStorage\";\nexport const isEmptyWorkList = workList => workList ? !Object.keys(workList).length : true;\nexport const isEmptyWork = workObj => workObj ? !Object.keys(workObj).length : true;\n\nconst getEmptyWorkList = () => {\n  return {};\n};\n\nconst checkWorkList = workList => isEmptyWorkList(workList) ? getEmptyWorkList() : workList;\n\nconst getInitList = user => !user && window.localStorage.getItem(\"workList\") ? JSON.parse(window.localStorage.getItem(\"workList\")) : [];\n\nexport const useWorkList = (user, date) => {\n  _s();\n\n  if (!user) window.localStorage.setItem(\"workList\", \"{}\");\n  const initList = getInitList();\n  const [workList, setWorkList] = useState(initList);\n\n  const getWorkList = async () => {\n    try {\n      let resWorkList;\n\n      if (user) {\n        const data = await APIv2.workList(user, date).get();\n        console.log(\"useWORKLIST, data: \", data === null || data === void 0 ? void 0 : data.data);\n        resWorkList = checkWorkList(data === null || data === void 0 ? void 0 : data.data);\n      } else {\n        resWorkList = LocalStroage.workList().get();\n      }\n\n      setWorkList(resWorkList);\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n  useEffect(() => {\n    getWorkList();\n  }, [date, user]);\n\n  const setWork = workObj => {\n    const id = workObj.id;\n    const _workList = { ...workList\n    };\n    return {\n      create: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await APIv2.workList(user, date).create(workObj);else LocalStroage.workList().set(_workList);\n      },\n      edit: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await APIv2.workList(user, date).edit(workObj);else LocalStroage.workList().set(_workList);\n      },\n      delete: async () => {\n        if (!delete _workList[id]) throw new Error(\"Cannot Delete WorkItem\");\n        setWorkList(_workList);\n        if (user) await APIv2.workList(user, date).delete(workObj);else LocalStroage.workList().set(_workList);\n      }\n    };\n  };\n\n  const updateWorkList = _workList => {\n    _workList = checkWorkList(_workList);\n    setWorkList(_workList);\n\n    if (user) {// API.post(`/api/${user}/${date}/worklist/worklist`, {\n      //   user: \"TEST\",\n      //   value: _workList,\n      // });\n    } else window.localStorage.setItem(\"workList\", JSON.stringify(_workList));\n  };\n\n  return {\n    workList,\n    updateWorkList,\n    setWork\n  };\n};\n\n_s(useWorkList, \"uUnjV6oTVBBPadCGz4VigBOSZFc=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/workList/work/useWorkList.js"],"names":["useEffect","useState","API","APIv2","LocalStroage","isEmptyWorkList","workList","Object","keys","length","isEmptyWork","workObj","getEmptyWorkList","checkWorkList","getInitList","user","window","localStorage","getItem","JSON","parse","useWorkList","date","setItem","initList","setWorkList","getWorkList","resWorkList","data","get","console","log","error","alert","setWork","id","_workList","create","set","edit","delete","Error","updateWorkList","stringify"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { API, APIv2 } from \"../../../tools/API\";\nimport { LocalStroage } from \"../../../tools/LocalStorage\";\n\nexport const isEmptyWorkList = (workList) =>\n  workList ? !Object.keys(workList).length : true;\nexport const isEmptyWork = (workObj) =>\n  workObj ? !Object.keys(workObj).length : true;\nconst getEmptyWorkList = () => {\n  return {};\n};\nconst checkWorkList = (workList) =>\n  isEmptyWorkList(workList) ? getEmptyWorkList() : workList;\n\nconst getInitList = (user) =>\n  !user && window.localStorage.getItem(\"workList\")\n    ? JSON.parse(window.localStorage.getItem(\"workList\"))\n    : [];\n\nexport const useWorkList = (user, date) => {\n  if (!user) window.localStorage.setItem(\"workList\", \"{}\");\n  const initList = getInitList();\n  const [workList, setWorkList] = useState(initList);\n\n  const getWorkList = async () => {\n    try {\n      let resWorkList;\n      if (user) {\n        const data = await APIv2.workList(user, date).get();\n        console.log(\"useWORKLIST, data: \", data?.data);\n        resWorkList = checkWorkList(data?.data);\n      } else {\n        resWorkList = LocalStroage.workList().get();\n      }\n      setWorkList(resWorkList);\n    } catch (error) {\n      alert(error);\n    }\n  };\n  useEffect(() => {\n    getWorkList();\n  }, [date, user]);\n\n  const setWork = (workObj) => {\n    const id = workObj.id;\n    const _workList = { ...workList };\n    return {\n      create: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await APIv2.workList(user, date).create(workObj);\n        else LocalStroage.workList().set(_workList);\n      },\n      edit: async () => {\n        _workList[id] = workObj;\n        setWorkList(_workList);\n        if (user) await APIv2.workList(user, date).edit(workObj);\n        else LocalStroage.workList().set(_workList);\n      },\n      delete: async () => {\n        if (!delete _workList[id]) throw new Error(\"Cannot Delete WorkItem\");\n        setWorkList(_workList);\n        if (user) await APIv2.workList(user, date).delete(workObj);\n        else LocalStroage.workList().set(_workList);\n      },\n    };\n  };\n  const updateWorkList = (_workList) => {\n    _workList = checkWorkList(_workList);\n    setWorkList(_workList);\n    if (user) {\n      // API.post(`/api/${user}/${date}/worklist/worklist`, {\n      //   user: \"TEST\",\n      //   value: _workList,\n      // });\n    } else window.localStorage.setItem(\"workList\", JSON.stringify(_workList));\n  };\n  return { workList, updateWorkList, setWork };\n};\n"]},"metadata":{},"sourceType":"module"}