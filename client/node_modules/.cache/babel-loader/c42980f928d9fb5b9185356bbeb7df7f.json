{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { Deque } from \"../../classes/Deque\";\nimport { APIv2 } from \"../../tools/API\";\nimport { LocalStroage } from \"../../tools/LocalStorage\";\nimport { getAddedDateStr, getDiffDayInStr } from \"../../tools/time\";\nconst STARTDATEDIFF = 2;\nconst DISPLAY_LENGTH = 5;\n\nconst makeStartDate = date => getAddedDateStr(date, -1 * Math.floor(DISPLAY_LENGTH / 2)); // const makeStartDate = (date) => getAddedDateStr(date, -1 * STARTDATEDIFF);\n\n\nconst getStartDate = date => LocalStroage.startDate().isEmpty() ? makeStartDate(date) : LocalStroage.startDate().get();\n\nlet befStartDate;\nlet listDeque;\nexport const useListView = (user, date, setDate, workList) => {\n  _s();\n\n  console.log(\"LIST VIEW RENDERING\");\n  const [startDate, setStratDate] = useState(getStartDate(date)); // const getEndDate = (startDate) =>\n  //   getAddedDateObj(startDate, STARTDATEDIFF * 2);\n\n  const [listView, setListView] = useState();\n  const [isListViewLoading, setLoad] = useState(false);\n\n  const updateStartDate = nextDate => {\n    console.log(\"list change\");\n    LocalStroage.startDate().set(nextDate);\n    setStratDate(nextDate);\n  };\n\n  const onClickLeftBtn = () => {\n    const nextDate = getAddedDateStr(startDate, -1);\n    updateStartDate(nextDate);\n  };\n\n  const onClickRightBtn = () => {\n    const nextDate = getAddedDateStr(startDate, 1);\n    updateStartDate(nextDate);\n  };\n\n  useEffect(() => {\n    updateStartDate(makeStartDate(date));\n  }, [date]);\n\n  const getListView = async () => {\n    try {\n      setLoad(true);\n      const data = await APIv2.listView(user, startDate).get(STARTDATEDIFF);\n      setLoad(false);\n      if (!(data === null || data === void 0 ? void 0 : data.data)) throw new Error(\"List View cann't found\");\n      console.log(\"[LISTVIEW] GET LIST VIEW:  \", data === null || data === void 0 ? void 0 : data.data);\n      listDeque = new Deque(data.data, DISPLAY_LENGTH);\n      setListView(listDeque.get());\n    } catch (error) {\n      setLoad(false);\n      alert(error);\n    }\n  };\n\n  useEffect(() => {\n    //setListView를 좀 더 스마트하게 바꾸어야 한다.\n    const updateListView = () => {};\n\n    const moveListView = () => {};\n\n    console.log(\"Set list view start\");\n    if (!befStartDate || getDiffDayInStr(befStartDate, startDate) > 2) updateListView(startDate);else moveListView(startDate);\n    getListView();\n    befStartDate = startDate;\n    return () => setLoad(false);\n  }, [startDate]);\n  return {\n    isListViewLoading,\n    startDate,\n    listView,\n    onClickLeftBtn,\n    onClickRightBtn\n  };\n};\n\n_s(useListView, \"winhrkvjr+81rjeJ0SI6qLAjsAc=\");","map":{"version":3,"sources":["/home/invidam/hamburger_calender/src/hooks/listView/useListView.js"],"names":["useEffect","useState","Deque","APIv2","LocalStroage","getAddedDateStr","getDiffDayInStr","STARTDATEDIFF","DISPLAY_LENGTH","makeStartDate","date","Math","floor","getStartDate","startDate","isEmpty","get","befStartDate","listDeque","useListView","user","setDate","workList","console","log","setStratDate","listView","setListView","isListViewLoading","setLoad","updateStartDate","nextDate","set","onClickLeftBtn","onClickRightBtn","getListView","data","Error","error","alert","updateListView","moveListView"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Deque } from \"../../classes/Deque\";\nimport { APIv2 } from \"../../tools/API\";\nimport { LocalStroage } from \"../../tools/LocalStorage\";\nimport { getAddedDateStr, getDiffDayInStr } from \"../../tools/time\";\nconst STARTDATEDIFF = 2;\nconst DISPLAY_LENGTH = 5;\nconst makeStartDate = (date) =>\n  getAddedDateStr(date, -1 * Math.floor(DISPLAY_LENGTH / 2));\n// const makeStartDate = (date) => getAddedDateStr(date, -1 * STARTDATEDIFF);\nconst getStartDate = (date) =>\n  LocalStroage.startDate().isEmpty()\n    ? makeStartDate(date)\n    : LocalStroage.startDate().get();\n\nlet befStartDate;\nlet listDeque;\nexport const useListView = (user, date, setDate, workList) => {\n  console.log(\"LIST VIEW RENDERING\");\n  const [startDate, setStratDate] = useState(getStartDate(date));\n  // const getEndDate = (startDate) =>\n  //   getAddedDateObj(startDate, STARTDATEDIFF * 2);\n  const [listView, setListView] = useState();\n  const [isListViewLoading, setLoad] = useState(false);\n\n  const updateStartDate = (nextDate) => {\n    console.log(\"list change\");\n    LocalStroage.startDate().set(nextDate);\n    setStratDate(nextDate);\n  };\n  const onClickLeftBtn = () => {\n    const nextDate = getAddedDateStr(startDate, -1);\n    updateStartDate(nextDate);\n  };\n  const onClickRightBtn = () => {\n    const nextDate = getAddedDateStr(startDate, 1);\n    updateStartDate(nextDate);\n  };\n\n  useEffect(() => {\n    updateStartDate(makeStartDate(date));\n  }, [date]);\n  const getListView = async () => {\n    try {\n      setLoad(true);\n      const data = await APIv2.listView(user, startDate).get(STARTDATEDIFF);\n      setLoad(false);\n      if (!data?.data) throw new Error(\"List View cann't found\");\n      console.log(\"[LISTVIEW] GET LIST VIEW:  \", data?.data);\n      listDeque = new Deque(data.data, DISPLAY_LENGTH);\n      setListView(listDeque.get());\n    } catch (error) {\n      setLoad(false);\n      alert(error);\n    }\n  };\n  useEffect(() => {\n    //setListView를 좀 더 스마트하게 바꾸어야 한다.\n    const updateListView = () => {};\n    const moveListView = () => {};\n    console.log(\"Set list view start\");\n    if (!befStartDate || getDiffDayInStr(befStartDate, startDate) > 2)\n      updateListView(startDate);\n    else moveListView(startDate);\n    getListView();\n    befStartDate = startDate;\n    return () => setLoad(false);\n  }, [startDate]);\n  return {\n    isListViewLoading,\n    startDate,\n    listView,\n    onClickLeftBtn,\n    onClickRightBtn,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}